# ç¬¬å››éƒ¨åˆ†ï¼šå‰ç«¯æ¶æ„æ¨¡å¼

> å‰ç«¯ç‰¹æœ‰çš„æ¶æ„æ¨¡å¼ï¼Œå¸®åŠ©ä½ æ„å»ºå¤§å‹å¯ç»´æŠ¤çš„åº”ç”¨

## ç›®å½•
- [MVC/MVVM æ¶æ„](#mvc-mvvm-æ¶æ„)
- [ç»„ä»¶åŒ–æ¨¡å¼](#ç»„ä»¶åŒ–æ¨¡å¼)
- [æ¨¡å—åŒ–æ¨¡å¼](#æ¨¡å—åŒ–æ¨¡å¼)
- [Flux/Redux å•å‘æ•°æ®æµ](#flux-redux-å•å‘æ•°æ®æµ)

---

## MVC/MVVM æ¶æ„

### ğŸ’¡ æ¨¡å¼å®šä¹‰

**MVC (Model-View-Controller)**ï¼šå°†åº”ç”¨åˆ†ä¸ºä¸‰å±‚
- **Modelï¼ˆæ¨¡å‹ï¼‰**ï¼šæ•°æ®å’Œä¸šåŠ¡é€»è¾‘
- **Viewï¼ˆè§†å›¾ï¼‰**ï¼šUI å±•ç¤º
- **Controllerï¼ˆæ§åˆ¶å™¨ï¼‰**ï¼šå¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œåè°ƒ Model å’Œ View

**MVVM (Model-View-ViewModel)**ï¼šMVC çš„å˜ä½“
- **Modelï¼ˆæ¨¡å‹ï¼‰**ï¼šæ•°æ®å’Œä¸šåŠ¡é€»è¾‘
- **Viewï¼ˆè§†å›¾ï¼‰**ï¼šUI å±•ç¤º
- **ViewModelï¼ˆè§†å›¾æ¨¡å‹ï¼‰**ï¼šView å’Œ Model çš„æ¡¥æ¢ï¼Œè´Ÿè´£æ•°æ®ç»‘å®š

### ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ MVC/MVVMï¼Ÿ

#### é—®é¢˜åœºæ™¯ï¼šä»£ç ç»„ç»‡æ··ä¹±ï¼Œé€»è¾‘è€¦åˆ

å‡è®¾ä½ åœ¨å¼€å‘ä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨ï¼š

#### âŒ æ²¡æœ‰æ¶æ„æ¨¡å¼çš„ç—›ç‚¹

```javascript
// TodoApp.jsx - æ‰€æœ‰é€»è¾‘æ··åœ¨ä¸€èµ·
function TodoApp() {
  const [todos, setTodos] = React.useState([]);
  const [inputValue, setInputValue] = React.useState('');
  const [filter, setFilter] = React.useState('all'); // all, active, completed

  // ä¸šåŠ¡é€»è¾‘å’Œ UI é€»è¾‘æ··åœ¨ä¸€èµ·
  const handleAddTodo = () => {
    if (!inputValue.trim()) {
      alert('è¯·è¾“å…¥å¾…åŠäº‹é¡¹');
      return;
    }

    // ç›´æ¥æ“ä½œçŠ¶æ€
    const newTodo = {
      id: Date.now(),
      text: inputValue,
      completed: false,
      createdAt: new Date(),
    };

    setTodos([...todos, newTodo]);
    setInputValue('');

    // UI æ“ä½œ
    document.querySelector('.todo-input').focus();

    // æŒä¹…åŒ–
    localStorage.setItem('todos', JSON.stringify([...todos, newTodo]));

    // æ•°æ®åˆ†æ
    console.log('Todo added:', newTodo);
  };

  const handleToggleTodo = (id) => {
    const newTodos = todos.map(todo =>
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    );
    setTodos(newTodos);
    localStorage.setItem('todos', JSON.stringify(newTodos));
  };

  const handleDeleteTodo = (id) => {
    const newTodos = todos.filter(todo => todo.id !== id);
    setTodos(newTodos);
    localStorage.setItem('todos', JSON.stringify(newTodos));
  };

  // è¿‡æ»¤é€»è¾‘
  const filteredTodos = todos.filter(todo => {
    if (filter === 'active') return !todo.completed;
    if (filter === 'completed') return todo.completed;
    return true;
  });

  // ç»Ÿè®¡é€»è¾‘
  const activeCount = todos.filter(t => !t.completed).length;
  const completedCount = todos.filter(t => t.completed).length;

  // ä» localStorage åŠ è½½
  React.useEffect(() => {
    const saved = localStorage.getItem('todos');
    if (saved) {
      setTodos(JSON.parse(saved));
    }
  }, []);

  // åºå¤§çš„ JSX
  return (
    <div className="todo-app">
      <h1>å¾…åŠäº‹é¡¹</h1>

      <div className="todo-input-container">
        <input
          className="todo-input"
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && handleAddTodo()}
          placeholder="æ·»åŠ å¾…åŠäº‹é¡¹"
        />
        <button onClick={handleAddTodo}>æ·»åŠ </button>
      </div>

      <div className="filters">
        <button
          className={filter === 'all' ? 'active' : ''}
          onClick={() => setFilter('all')}
        >
          å…¨éƒ¨ ({todos.length})
        </button>
        <button
          className={filter === 'active' ? 'active' : ''}
          onClick={() => setFilter('active')}
        >
          æœªå®Œæˆ ({activeCount})
        </button>
        <button
          className={filter === 'completed' ? 'active' : ''}
          onClick={() => setFilter('completed')}
        >
          å·²å®Œæˆ ({completedCount})
        </button>
      </div>

      <ul className="todo-list">
        {filteredTodos.map(todo => (
          <li key={todo.id} className={todo.completed ? 'completed' : ''}>
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => handleToggleTodo(todo.id)}
            />
            <span>{todo.text}</span>
            <button onClick={() => handleDeleteTodo(todo.id)}>åˆ é™¤</button>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

**é—®é¢˜**ï¼š
- ä¸šåŠ¡é€»è¾‘ã€UI é€»è¾‘ã€æ•°æ®æŒä¹…åŒ–å…¨éƒ¨æ··åœ¨ä¸€èµ·
- éš¾ä»¥æµ‹è¯•ï¼šæ— æ³•ç‹¬ç«‹æµ‹è¯•ä¸šåŠ¡é€»è¾‘
- éš¾ä»¥å¤ç”¨ï¼šé€»è¾‘ä¸ç»„ä»¶å¼ºè€¦åˆ
- éš¾ä»¥ç»´æŠ¤ï¼šä¸€ä¸ªæ–‡ä»¶åŒ…å«æ‰€æœ‰å†…å®¹

---

#### âœ… ä½¿ç”¨ MVVM æ¨¡å¼è§£å†³ï¼ˆReact é£æ ¼ï¼‰

```javascript
// models/TodoModel.js - Model å±‚ï¼ˆæ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼‰
class TodoModel {
  constructor() {
    this.todos = [];
    this.listeners = [];
  }

  // ä¸šåŠ¡é€»è¾‘
  addTodo(text) {
    if (!text.trim()) {
      throw new Error('å¾…åŠäº‹é¡¹ä¸èƒ½ä¸ºç©º');
    }

    const todo = {
      id: Date.now(),
      text: text.trim(),
      completed: false,
      createdAt: new Date(),
    };

    this.todos.push(todo);
    this.notify();
    return todo;
  }

  toggleTodo(id) {
    const todo = this.todos.find(t => t.id === id);
    if (todo) {
      todo.completed = !todo.completed;
      this.notify();
    }
  }

  deleteTodo(id) {
    this.todos = this.todos.filter(t => t.id !== id);
    this.notify();
  }

  updateTodo(id, text) {
    const todo = this.todos.find(t => t.id === id);
    if (todo) {
      todo.text = text.trim();
      this.notify();
    }
  }

  // æŸ¥è¯¢æ–¹æ³•
  getTodos() {
    return [...this.todos];
  }

  getTodoById(id) {
    return this.todos.find(t => t.id === id);
  }

  getActiveTodos() {
    return this.todos.filter(t => !t.completed);
  }

  getCompletedTodos() {
    return this.todos.filter(t => t.completed);
  }

  // ç»Ÿè®¡
  getActiveCount() {
    return this.getActiveTodos().length;
  }

  getCompletedCount() {
    return this.getCompletedTodos().length;
  }

  getTotalCount() {
    return this.todos.length;
  }

  // è§‚å¯Ÿè€…æ¨¡å¼ï¼šé€šçŸ¥å˜åŒ–
  subscribe(listener) {
    this.listeners.push(listener);
    return () => {
      this.listeners = this.listeners.filter(l => l !== listener);
    };
  }

  notify() {
    this.listeners.forEach(listener => listener(this.todos));
  }

  // æŒä¹…åŒ–
  save() {
    localStorage.setItem('todos', JSON.stringify(this.todos));
  }

  load() {
    const saved = localStorage.getItem('todos');
    if (saved) {
      this.todos = JSON.parse(saved);
      this.notify();
    }
  }
}

export default new TodoModel();
```

```javascript
// viewModels/useTodoViewModel.js - ViewModel å±‚ï¼ˆè¿æ¥ Model å’Œ Viewï¼‰
import React from 'react';
import todoModel from '../models/TodoModel';

function useTodoViewModel() {
  const [todos, setTodos] = React.useState(todoModel.getTodos());
  const [filter, setFilter] = React.useState('all');

  // è®¢é˜… Model å˜åŒ–
  React.useEffect(() => {
    // åŠ è½½æ•°æ®
    todoModel.load();

    // è®¢é˜…å˜åŒ–
    const unsubscribe = todoModel.subscribe((newTodos) => {
      setTodos(newTodos);
      todoModel.save(); // è‡ªåŠ¨ä¿å­˜
    });

    return unsubscribe;
  }, []);

  // ViewModel æ–¹æ³•ï¼ˆæš´éœ²ç»™ Viewï¼‰
  const addTodo = (text) => {
    try {
      todoModel.addTodo(text);
      return { success: true };
    } catch (error) {
      return { success: false, error: error.message };
    }
  };

  const toggleTodo = (id) => {
    todoModel.toggleTodo(id);
  };

  const deleteTodo = (id) => {
    todoModel.deleteTodo(id);
  };

  const updateTodo = (id, text) => {
    try {
      todoModel.updateTodo(id, text);
      return { success: true };
    } catch (error) {
      return { success: false, error: error.message };
    }
  };

  // è®¡ç®—å±æ€§ï¼ˆæ´¾ç”Ÿæ•°æ®ï¼‰
  const filteredTodos = React.useMemo(() => {
    switch (filter) {
      case 'active':
        return todoModel.getActiveTodos();
      case 'completed':
        return todoModel.getCompletedTodos();
      default:
        return todos;
    }
  }, [todos, filter]);

  const stats = React.useMemo(() => ({
    total: todoModel.getTotalCount(),
    active: todoModel.getActiveCount(),
    completed: todoModel.getCompletedCount(),
  }), [todos]);

  return {
    // æ•°æ®
    todos: filteredTodos,
    filter,
    stats,

    // æ“ä½œ
    addTodo,
    toggleTodo,
    deleteTodo,
    updateTodo,
    setFilter,
  };
}

export default useTodoViewModel;
```

```javascript
// views/TodoApp.jsx - View å±‚ï¼ˆçº¯ UIï¼‰
import React from 'react';
import useTodoViewModel from '../viewModels/useTodoViewModel';
import TodoInput from './TodoInput';
import TodoFilters from './TodoFilters';
import TodoList from './TodoList';

function TodoApp() {
  const viewModel = useTodoViewModel();

  return (
    <div className="todo-app">
      <h1>å¾…åŠäº‹é¡¹</h1>

      <TodoInput onAdd={viewModel.addTodo} />

      <TodoFilters
        current={viewModel.filter}
        stats={viewModel.stats}
        onChange={viewModel.setFilter}
      />

      <TodoList
        todos={viewModel.todos}
        onToggle={viewModel.toggleTodo}
        onDelete={viewModel.deleteTodo}
      />
    </div>
  );
}

export default TodoApp;
```

```javascript
// views/TodoInput.jsx - è¾“å…¥ç»„ä»¶
import React from 'react';

function TodoInput({ onAdd }) {
  const [value, setValue] = React.useState('');
  const inputRef = React.useRef();

  const handleSubmit = () => {
    const result = onAdd(value);

    if (result.success) {
      setValue('');
      inputRef.current.focus();
    } else {
      alert(result.error);
    }
  };

  return (
    <div className="todo-input-container">
      <input
        ref={inputRef}
        value={value}
        onChange={(e) => setValue(e.target.value)}
        onKeyPress={(e) => e.key === 'Enter' && handleSubmit()}
        placeholder="æ·»åŠ å¾…åŠäº‹é¡¹"
      />
      <button onClick={handleSubmit}>æ·»åŠ </button>
    </div>
  );
}

export default TodoInput;
```

```javascript
// views/TodoFilters.jsx - è¿‡æ»¤å™¨ç»„ä»¶
import React from 'react';

function TodoFilters({ current, stats, onChange }) {
  const filters = [
    { key: 'all', label: 'å…¨éƒ¨', count: stats.total },
    { key: 'active', label: 'æœªå®Œæˆ', count: stats.active },
    { key: 'completed', label: 'å·²å®Œæˆ', count: stats.completed },
  ];

  return (
    <div className="filters">
      {filters.map(filter => (
        <button
          key={filter.key}
          className={current === filter.key ? 'active' : ''}
          onClick={() => onChange(filter.key)}
        >
          {filter.label} ({filter.count})
        </button>
      ))}
    </div>
  );
}

export default TodoFilters;
```

```javascript
// views/TodoList.jsx - åˆ—è¡¨ç»„ä»¶
import React from 'react';
import TodoItem from './TodoItem';

function TodoList({ todos, onToggle, onDelete }) {
  if (todos.length === 0) {
    return <p className="empty">æš‚æ— å¾…åŠäº‹é¡¹</p>;
  }

  return (
    <ul className="todo-list">
      {todos.map(todo => (
        <TodoItem
          key={todo.id}
          todo={todo}
          onToggle={onToggle}
          onDelete={onDelete}
        />
      ))}
    </ul>
  );
}

export default TodoList;
```

```javascript
// views/TodoItem.jsx - å•ä¸ªå¾…åŠé¡¹ç»„ä»¶
import React from 'react';

function TodoItem({ todo, onToggle, onDelete }) {
  return (
    <li className={todo.completed ? 'completed' : ''}>
      <input
        type="checkbox"
        checked={todo.completed}
        onChange={() => onToggle(todo.id)}
      />
      <span>{todo.text}</span>
      <button onClick={() => onDelete(todo.id)}>åˆ é™¤</button>
    </li>
  );
}

export default TodoItem;
```

**æ•ˆæœ**ï¼š
- âœ… åˆ†å±‚æ¸…æ™°ï¼šModelã€ViewModelã€View å„å¸å…¶èŒ
- âœ… æ˜“äºæµ‹è¯•ï¼šå¯ä»¥ç‹¬ç«‹æµ‹è¯• Model çš„ä¸šåŠ¡é€»è¾‘
- âœ… æ˜“äºå¤ç”¨ï¼šModel å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å¤ç”¨
- âœ… æ˜“äºç»´æŠ¤ï¼šä¿®æ”¹ä¸šåŠ¡é€»è¾‘ä¸å½±å“ UI

---

### ğŸ¯ Vue MVVM å®ç°

Vue å¤©ç”Ÿå°±æ˜¯ MVVM æ¶æ„ï¼š

```javascript
// TodoModel.js - Modelï¼ˆæ•°æ®æœåŠ¡ï¼‰
class TodoService {
  async fetchTodos() {
    const response = await fetch('/api/todos');
    return response.json();
  }

  async addTodo(text) {
    const response = await fetch('/api/todos', {
      method: 'POST',
      body: JSON.stringify({ text }),
    });
    return response.json();
  }

  async toggleTodo(id) {
    const response = await fetch(`/api/todos/${id}/toggle`, {
      method: 'PUT',
    });
    return response.json();
  }

  async deleteTodo(id) {
    await fetch(`/api/todos/${id}`, {
      method: 'DELETE',
    });
  }
}

export default new TodoService();
```

```vue
<!-- TodoApp.vue - View + ViewModel -->
<template>
  <div class="todo-app">
    <h1>å¾…åŠäº‹é¡¹</h1>

    <div class="todo-input-container">
      <input
        v-model="inputValue"
        @keyup.enter="addTodo"
        placeholder="æ·»åŠ å¾…åŠäº‹é¡¹"
      />
      <button @click="addTodo">æ·»åŠ </button>
    </div>

    <div class="filters">
      <button
        v-for="f in filters"
        :key="f.key"
        :class="{ active: filter === f.key }"
        @click="filter = f.key"
      >
        {{ f.label }} ({{ f.count }})
      </button>
    </div>

    <ul class="todo-list">
      <li
        v-for="todo in filteredTodos"
        :key="todo.id"
        :class="{ completed: todo.completed }"
      >
        <input
          type="checkbox"
          :checked="todo.completed"
          @change="toggleTodo(todo.id)"
        />
        <span>{{ todo.text }}</span>
        <button @click="deleteTodo(todo.id)">åˆ é™¤</button>
      </li>
    </ul>
  </div>
</template>

<script>
import { ref, computed, onMounted } from 'vue';
import todoService from './TodoModel';

export default {
  name: 'TodoApp',
  setup() {
    // ViewModel æ•°æ®
    const todos = ref([]);
    const inputValue = ref('');
    const filter = ref('all');

    // ViewModel è®¡ç®—å±æ€§
    const filteredTodos = computed(() => {
      switch (filter.value) {
        case 'active':
          return todos.value.filter(t => !t.completed);
        case 'completed':
          return todos.value.filter(t => t.completed);
        default:
          return todos.value;
      }
    });

    const stats = computed(() => ({
      total: todos.value.length,
      active: todos.value.filter(t => !t.completed).length,
      completed: todos.value.filter(t => t.completed).length,
    }));

    const filters = computed(() => [
      { key: 'all', label: 'å…¨éƒ¨', count: stats.value.total },
      { key: 'active', label: 'æœªå®Œæˆ', count: stats.value.active },
      { key: 'completed', label: 'å·²å®Œæˆ', count: stats.value.completed },
    ]);

    // ViewModel æ–¹æ³•ï¼ˆè°ƒç”¨ Modelï¼‰
    const loadTodos = async () => {
      todos.value = await todoService.fetchTodos();
    };

    const addTodo = async () => {
      if (!inputValue.value.trim()) {
        alert('è¯·è¾“å…¥å¾…åŠäº‹é¡¹');
        return;
      }

      const newTodo = await todoService.addTodo(inputValue.value);
      todos.value.push(newTodo);
      inputValue.value = '';
    };

    const toggleTodo = async (id) => {
      await todoService.toggleTodo(id);
      const todo = todos.value.find(t => t.id === id);
      if (todo) {
        todo.completed = !todo.completed;
      }
    };

    const deleteTodo = async (id) => {
      await todoService.deleteTodo(id);
      todos.value = todos.value.filter(t => t.id !== id);
    };

    onMounted(() => {
      loadTodos();
    });

    return {
      // æ•°æ®
      inputValue,
      filter,
      filteredTodos,
      filters,

      // æ–¹æ³•
      addTodo,
      toggleTodo,
      deleteTodo,
    };
  },
};
</script>
```

**Vue çš„ MVVM ç‰¹ç‚¹**ï¼š
- **å“åº”å¼æ•°æ®ç»‘å®š**ï¼šæ•°æ®å˜åŒ–è‡ªåŠ¨æ›´æ–° UI
- **åŒå‘ç»‘å®š**ï¼š`v-model` å®ç°è¡¨å•åŒå‘ç»‘å®š
- **è®¡ç®—å±æ€§**ï¼šè‡ªåŠ¨ç¼“å­˜æ´¾ç”Ÿæ•°æ®
- **ç”Ÿå‘½å‘¨æœŸé’©å­**ï¼šåœ¨åˆé€‚çš„æ—¶æœºæ‰§è¡Œé€»è¾‘

---

### ğŸ—ï¸ MVC vs MVVM å¯¹æ¯”

| ç‰¹æ€§ | MVC | MVVM |
|-----|-----|------|
| **æ•°æ®æµ** | View â†’ Controller â†’ Model | View â†” ViewModel â†” Model |
| **æ•°æ®ç»‘å®š** | æ‰‹åŠ¨æ›´æ–° | è‡ªåŠ¨åŒå‘ç»‘å®š |
| **å…¸å‹æ¡†æ¶** | Backbone.jsã€Angular 1.x | Vueã€Angular 2+ã€Knockout |
| **View å’Œé€»è¾‘** | é€šè¿‡ Controller è¿æ¥ | é€šè¿‡æ•°æ®ç»‘å®šè¿æ¥ |
| **é€‚ç”¨åœºæ™¯** | åç«¯æ¸²æŸ“ã€ä¼ ç»Ÿ Web åº”ç”¨ | ç°ä»£ SPA åº”ç”¨ |

### React æ˜¯ä»€ä¹ˆæ¶æ„ï¼Ÿ

React **ä¸æ˜¯ä¸¥æ ¼çš„ MVC æˆ– MVVM**ï¼Œè€Œæ˜¯ï¼š
- **ç»„ä»¶åŒ–æ¶æ„**ï¼šä¸€åˆ‡çš†ç»„ä»¶
- **å•å‘æ•°æ®æµ**ï¼šæ•°æ®ä»ä¸Šåˆ°ä¸‹æµåŠ¨
- **View å±‚åº“**ï¼šä¸“æ³¨äº UI æ¸²æŸ“

å¯ä»¥è¯´ React æ˜¯ **View å±‚ + Flux/Reduxï¼ˆæ•°æ®æµï¼‰** çš„ç»„åˆã€‚

---

### âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ

#### âœ… ä¼˜ç‚¹

1. **åˆ†å±‚æ¸…æ™°**ï¼šèŒè´£åˆ†æ˜ï¼Œæ˜“äºç†è§£
2. **æ˜“äºæµ‹è¯•**ï¼šä¸šåŠ¡é€»è¾‘å¯ç‹¬ç«‹æµ‹è¯•
3. **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ä¸€å±‚ä¸å½±å“å…¶ä»–å±‚
4. **ä»£ç å¤ç”¨**ï¼šModel å¯ä»¥åœ¨å¤šä¸ª View ä¸­å¤ç”¨

#### âŒ ç¼ºç‚¹

1. **å­¦ä¹ æ›²çº¿**ï¼šéœ€è¦ç†è§£åˆ†å±‚æ¦‚å¿µ
2. **ä»£ç é‡å¢åŠ **ï¼šç®€å•åº”ç”¨ä¹Ÿè¦åˆ†å±‚
3. **è¿‡åº¦è®¾è®¡**ï¼šå°é¡¹ç›®å¯èƒ½ä¸éœ€è¦

---

### ğŸ“‹ ä½•æ—¶ä½¿ç”¨ MVC/MVVM

#### âœ… é€‚åˆä½¿ç”¨çš„åœºæ™¯

- ä¸­å¤§å‹åº”ç”¨
- ä¸šåŠ¡é€»è¾‘å¤æ‚
- éœ€è¦å¤šä¸ªè§†å›¾å±•ç¤ºåŒä¸€æ•°æ®
- éœ€è¦è‡ªåŠ¨åŒ–æµ‹è¯•

#### âŒ ä¸é€‚åˆä½¿ç”¨çš„åœºæ™¯

- å°å‹ç®€å•åº”ç”¨
- é™æ€é¡µé¢
- åŸå‹å¼€å‘

---

## ç»„ä»¶åŒ–æ¨¡å¼

### ğŸ’¡ æ¨¡å¼å®šä¹‰
ç»„ä»¶åŒ–æ˜¯å°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†å°è£…è‡ªå·±çš„ç»“æ„ã€æ ·å¼å’Œé€»è¾‘ã€‚

### ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ç»„ä»¶åŒ–ï¼Ÿ

#### é—®é¢˜åœºæ™¯ï¼šä»£ç é‡å¤ã€éš¾ä»¥ç»´æŠ¤

å‡è®¾ä½ è¦å¼€å‘ä¸€ä¸ªç”µå•†å¹³å°ï¼š

#### âŒ ä¸ä½¿ç”¨ç»„ä»¶åŒ–çš„ç—›ç‚¹

```javascript
// ProductPage.jsx - æ‰€æœ‰ä»£ç éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶
function ProductPage() {
  return (
    <div className="product-page">
      {/* é¡¶éƒ¨å¯¼èˆª - æ¯ä¸ªé¡µé¢éƒ½è¦å¤åˆ¶è¿™æ®µä»£ç  */}
      <header className="header">
        <div className="logo">å•†åŸ</div>
        <nav>
          <a href="/">é¦–é¡µ</a>
          <a href="/products">å•†å“</a>
          <a href="/cart">è´­ç‰©è½¦</a>
        </nav>
        <div className="user-menu">
          <span>æ¬¢è¿ï¼Œç”¨æˆ·</span>
          <button>é€€å‡º</button>
        </div>
      </header>

      {/* å•†å“åˆ—è¡¨ - é‡å¤çš„å¡ç‰‡ä»£ç  */}
      <div className="product-list">
        <div className="product-card">
          <img src="product1.jpg" alt="å•†å“1" />
          <h3>å•†å“1</h3>
          <p className="price">Â¥99</p>
          <button className="btn-primary">åŠ å…¥è´­ç‰©è½¦</button>
        </div>

        <div className="product-card">
          <img src="product2.jpg" alt="å•†å“2" />
          <h3>å•†å“2</h3>
          <p className="price">Â¥199</p>
          <button className="btn-primary">åŠ å…¥è´­ç‰©è½¦</button>
        </div>

        <div className="product-card">
          <img src="product3.jpg" alt="å•†å“3" />
          <h3>å•†å“3</h3>
          <p className="price">Â¥299</p>
          <button className="btn-primary">åŠ å…¥è´­ç‰©è½¦</button>
        </div>

        {/* é‡å¤ 100 æ¬¡... */}
      </div>

      {/* åº•éƒ¨ - æ¯ä¸ªé¡µé¢ä¹Ÿè¦å¤åˆ¶ */}
      <footer className="footer">
        <p>Â© 2024 å•†åŸ. All rights reserved.</p>
        <div className="footer-links">
          <a href="/about">å…³äºæˆ‘ä»¬</a>
          <a href="/contact">è”ç³»æˆ‘ä»¬</a>
          <a href="/privacy">éšç§æ”¿ç­–</a>
        </div>
      </footer>
    </div>
  );
}
```

**é—®é¢˜**ï¼š
- å¤§é‡é‡å¤ä»£ç ï¼ˆHeaderã€Footerã€ProductCardï¼‰
- ä¿®æ”¹ä¸€ä¸ªæŒ‰é’®éœ€è¦æ”¹ 100 ä¸ªåœ°æ–¹
- ä»£ç éš¾ä»¥ç»´æŠ¤
- æ— æ³•ç‹¬ç«‹æµ‹è¯•æŸä¸ªéƒ¨åˆ†

---

#### âœ… ä½¿ç”¨ç»„ä»¶åŒ–è§£å†³

```javascript
// components/Header.jsx - å¤´éƒ¨ç»„ä»¶
function Header({ user, onLogout }) {
  return (
    <header className="header">
      <div className="logo">å•†åŸ</div>
      <nav>
        <a href="/">é¦–é¡µ</a>
        <a href="/products">å•†å“</a>
        <a href="/cart">è´­ç‰©è½¦</a>
      </nav>
      <div className="user-menu">
        {user ? (
          <>
            <span>æ¬¢è¿ï¼Œ{user.name}</span>
            <button onClick={onLogout}>é€€å‡º</button>
          </>
        ) : (
          <a href="/login">ç™»å½•</a>
        )}
      </div>
    </header>
  );
}

export default Header;
```

```javascript
// components/Footer.jsx - åº•éƒ¨ç»„ä»¶
function Footer() {
  return (
    <footer className="footer">
      <p>Â© 2024 å•†åŸ. All rights reserved.</p>
      <div className="footer-links">
        <a href="/about">å…³äºæˆ‘ä»¬</a>
        <a href="/contact">è”ç³»æˆ‘ä»¬</a>
        <a href="/privacy">éšç§æ”¿ç­–</a>
      </div>
    </footer>
  );
}

export default Footer;
```

```javascript
// components/ProductCard.jsx - å•†å“å¡ç‰‡ç»„ä»¶
function ProductCard({ product, onAddToCart }) {
  return (
    <div className="product-card">
      <img src={product.image} alt={product.name} />
      <h3>{product.name}</h3>
      <p className="price">Â¥{product.price}</p>
      <button
        className="btn-primary"
        onClick={() => onAddToCart(product)}
      >
        åŠ å…¥è´­ç‰©è½¦
      </button>
    </div>
  );
}

export default ProductCard;
```

```javascript
// components/Button.jsx - é€šç”¨æŒ‰é’®ç»„ä»¶
function Button({ children, variant = 'primary', size = 'medium', onClick, disabled }) {
  const className = `btn btn-${variant} btn-${size}`;

  return (
    <button
      className={className}
      onClick={onClick}
      disabled={disabled}
    >
      {children}
    </button>
  );
}

export default Button;
```

```javascript
// pages/ProductPage.jsx - ä½¿ç”¨ç»„ä»¶ç»„åˆ
import Header from '../components/Header';
import Footer from '../components/Footer';
import ProductCard from '../components/ProductCard';

function ProductPage() {
  const products = [
    { id: 1, name: 'å•†å“1', price: 99, image: 'product1.jpg' },
    { id: 2, name: 'å•†å“2', price: 199, image: 'product2.jpg' },
    { id: 3, name: 'å•†å“3', price: 299, image: 'product3.jpg' },
  ];

  const handleAddToCart = (product) => {
    console.log('åŠ å…¥è´­ç‰©è½¦:', product);
  };

  return (
    <div className="product-page">
      <Header user={{ name: 'å¼ ä¸‰' }} onLogout={() => {}} />

      <div className="product-list">
        {products.map(product => (
          <ProductCard
            key={product.id}
            product={product}
            onAddToCart={handleAddToCart}
          />
        ))}
      </div>

      <Footer />
    </div>
  );
}

export default ProductPage;
```

**æ•ˆæœ**ï¼š
- âœ… ä»£ç å¤ç”¨ï¼šHeaderã€Footer åœ¨æ‰€æœ‰é¡µé¢å¤ç”¨
- âœ… æ˜“äºç»´æŠ¤ï¼šä¿®æ”¹æŒ‰é’®åªéœ€æ”¹ Button ç»„ä»¶
- âœ… ç‹¬ç«‹æµ‹è¯•ï¼šå¯ä»¥å•ç‹¬æµ‹è¯• ProductCard
- âœ… æ˜“äºç†è§£ï¼šæ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€

---

### ğŸ¯ ç»„ä»¶è®¾è®¡åŸåˆ™

#### 1. å•ä¸€èŒè´£åŸåˆ™

```javascript
// âŒ åçš„è®¾è®¡ï¼šä¸€ä¸ªç»„ä»¶åšå¤ªå¤šäº‹
function UserProfile() {
  // è·å–ç”¨æˆ·æ•°æ®
  // å¤„ç†è¡¨å•éªŒè¯
  // ä¸Šä¼ å¤´åƒ
  // ä¿®æ”¹å¯†ç 
  // æ˜¾ç¤ºè®¢å•å†å²
  // ...
}

// âœ… å¥½çš„è®¾è®¡ï¼šæ‹†åˆ†æˆå¤šä¸ªç»„ä»¶
function UserProfile() {
  return (
    <div>
      <UserAvatar />
      <UserInfo />
      <PasswordChange />
      <OrderHistory />
    </div>
  );
}
```

#### 2. å®¹å™¨ç»„ä»¶ vs å±•ç¤ºç»„ä»¶

```javascript
// å±•ç¤ºç»„ä»¶ï¼ˆPresentational Componentï¼‰- åªè´Ÿè´£ UI
function UserList({ users, onUserClick }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id} onClick={() => onUserClick(user)}>
          {user.name}
        </li>
      ))}
    </ul>
  );
}

// å®¹å™¨ç»„ä»¶ï¼ˆContainer Componentï¼‰- è´Ÿè´£æ•°æ®å’Œé€»è¾‘
function UserListContainer() {
  const [users, setUsers] = React.useState([]);

  React.useEffect(() => {
    fetchUsers().then(setUsers);
  }, []);

  const handleUserClick = (user) => {
    console.log('Clicked:', user);
  };

  return <UserList users={users} onUserClick={handleUserClick} />;
}
```

#### 3. ç»„ä»¶ç»„åˆï¼ˆCompositionï¼‰

```javascript
// ä½¿ç”¨ children å®ç°ç»„ä»¶ç»„åˆ
function Card({ title, children, footer }) {
  return (
    <div className="card">
      <div className="card-header">
        <h3>{title}</h3>
      </div>
      <div className="card-body">
        {children}
      </div>
      {footer && (
        <div className="card-footer">
          {footer}
        </div>
      )}
    </div>
  );
}

// ä½¿ç”¨
function UserCard({ user }) {
  return (
    <Card
      title={user.name}
      footer={<Button>æŸ¥çœ‹è¯¦æƒ…</Button>}
    >
      <p>é‚®ç®±: {user.email}</p>
      <p>å¹´é¾„: {user.age}</p>
    </Card>
  );
}
```

#### 4. é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰

```javascript
// é«˜é˜¶ç»„ä»¶ï¼šç»™ç»„ä»¶æ·»åŠ é¢å¤–åŠŸèƒ½
function withLoading(Component) {
  return function WithLoadingComponent({ isLoading, ...props }) {
    if (isLoading) {
      return <div>åŠ è½½ä¸­...</div>;
    }
    return <Component {...props} />;
  };
}

// ä½¿ç”¨
const UserListWithLoading = withLoading(UserList);

function App() {
  const [users, setUsers] = React.useState([]);
  const [isLoading, setIsLoading] = React.useState(true);

  return (
    <UserListWithLoading
      users={users}
      isLoading={isLoading}
    />
  );
}
```

#### 5. Render Props

```javascript
// ä½¿ç”¨ Render Props å…±äº«é€»è¾‘
function MouseTracker({ render }) {
  const [position, setPosition] = React.useState({ x: 0, y: 0 });

  const handleMouseMove = (e) => {
    setPosition({ x: e.clientX, y: e.clientY });
  };

  React.useEffect(() => {
    window.addEventListener('mousemove', handleMouseMove);
    return () => window.removeEventListener('mousemove', handleMouseMove);
  }, []);

  return render(position);
}

// ä½¿ç”¨
function App() {
  return (
    <MouseTracker
      render={({ x, y }) => (
        <div>é¼ æ ‡ä½ç½®: {x}, {y}</div>
      )}
    />
  );
}
```

---

### ğŸ—ï¸ ç»„ä»¶åº“è®¾è®¡

#### è®¾è®¡ä¸€ä¸ª Button ç»„ä»¶åº“

```javascript
// Button.jsx - å®Œæ•´çš„æŒ‰é’®ç»„ä»¶
import React from 'react';
import PropTypes from 'prop-types';
import './Button.css';

function Button({
  children,
  variant = 'primary',
  size = 'medium',
  disabled = false,
  loading = false,
  icon,
  iconPosition = 'left',
  onClick,
  ...rest
}) {
  const className = [
    'btn',
    `btn-${variant}`,
    `btn-${size}`,
    disabled && 'btn-disabled',
    loading && 'btn-loading',
  ].filter(Boolean).join(' ');

  const handleClick = (e) => {
    if (disabled || loading) return;
    onClick?.(e);
  };

  return (
    <button
      className={className}
      onClick={handleClick}
      disabled={disabled || loading}
      {...rest}
    >
      {loading && <span className="btn-spinner"></span>}
      {!loading && icon && iconPosition === 'left' && (
        <span className="btn-icon">{icon}</span>
      )}
      <span className="btn-text">{children}</span>
      {!loading && icon && iconPosition === 'right' && (
        <span className="btn-icon">{icon}</span>
      )}
    </button>
  );
}

Button.propTypes = {
  children: PropTypes.node.isRequired,
  variant: PropTypes.oneOf(['primary', 'secondary', 'danger', 'ghost']),
  size: PropTypes.oneOf(['small', 'medium', 'large']),
  disabled: PropTypes.bool,
  loading: PropTypes.bool,
  icon: PropTypes.node,
  iconPosition: PropTypes.oneOf(['left', 'right']),
  onClick: PropTypes.func,
};

export default Button;
```

```javascript
// ä½¿ç”¨ Button ç»„ä»¶
function App() {
  return (
    <div>
      <Button variant="primary">ä¸»è¦æŒ‰é’®</Button>
      <Button variant="secondary" size="small">æ¬¡è¦æŒ‰é’®</Button>
      <Button variant="danger" icon="ğŸ—‘ï¸">åˆ é™¤</Button>
      <Button loading>åŠ è½½ä¸­</Button>
      <Button disabled>ç¦ç”¨æŒ‰é’®</Button>
    </div>
  );
}
```

---

### âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ

#### âœ… ä¼˜ç‚¹

1. **ä»£ç å¤ç”¨**ï¼šç»„ä»¶å¯ä»¥åœ¨å¤šå¤„ä½¿ç”¨
2. **æ˜“äºç»´æŠ¤**ï¼šä¿®æ”¹ä¸€ä¸ªç»„ä»¶å½±å“æ‰€æœ‰ä½¿ç”¨å¤„
3. **ç‹¬ç«‹æµ‹è¯•**ï¼šå¯ä»¥å•ç‹¬æµ‹è¯•ç»„ä»¶
4. **å›¢é˜Ÿåä½œ**ï¼šä¸åŒäººå¼€å‘ä¸åŒç»„ä»¶
5. **å¯ç»„åˆ**ï¼šå°ç»„ä»¶ç»„åˆæˆå¤§ç»„ä»¶

#### âŒ ç¼ºç‚¹

1. **å­¦ä¹ æˆæœ¬**ï¼šéœ€è¦ç†è§£ç»„ä»¶è®¾è®¡åŸåˆ™
2. **è¿‡åº¦æ‹†åˆ†**ï¼šå¯èƒ½å¯¼è‡´ç»„ä»¶è¿‡å¤š
3. **props ä¼ é€’**ï¼šæ·±å±‚åµŒå¥—æ—¶ props ä¼ é€’å¤æ‚

---

### ğŸ“‹ ä½•æ—¶ä½¿ç”¨ç»„ä»¶åŒ–

#### âœ… é€‚åˆä½¿ç”¨çš„åœºæ™¯

- ä»»ä½• React/Vue é¡¹ç›®ï¼ˆå¿…ç”¨ï¼‰
- éœ€è¦ä»£ç å¤ç”¨
- å¤šäººåä½œå¼€å‘
- éœ€è¦ç‹¬ç«‹æµ‹è¯•

#### âŒ ä¸é€‚åˆä½¿ç”¨çš„åœºæ™¯

- é™æ€ HTML é¡µé¢
- ä¸€æ¬¡æ€§ä»£ç 

---

## æ¨¡å—åŒ–æ¨¡å¼

### ğŸ’¡ æ¨¡å¼å®šä¹‰
æ¨¡å—åŒ–æ˜¯å°†ä»£ç æ‹†åˆ†æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—å°è£…ç‰¹å®šåŠŸèƒ½ï¼Œé€šè¿‡å¯¼å…¥å¯¼å‡ºè¿›è¡Œäº¤äº’ã€‚

### ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–ï¼Ÿ

#### é—®é¢˜åœºæ™¯ï¼šå…¨å±€å˜é‡æ±¡æŸ“ã€ä¾èµ–æ··ä¹±

#### âŒ ä¸ä½¿ç”¨æ¨¡å—åŒ–çš„ç—›ç‚¹

```html
<!-- index.html - æ‰€æœ‰è„šæœ¬éƒ½åœ¨å…¨å±€ -->
<!DOCTYPE html>
<html>
<head>
  <title>åº”ç”¨</title>
</head>
<body>
  <div id="app"></div>

  <!-- è„šæœ¬é¡ºåºå¾ˆé‡è¦ï¼ -->
  <script src="jquery.js"></script>
  <script src="lodash.js"></script>
  <script src="utils.js"></script>
  <script src="api.js"></script>
  <script src="app.js"></script>
</body>
</html>
```

```javascript
// utils.js - å…¨å±€å˜é‡æ±¡æŸ“
var formatDate = function(date) {
  // æ ¼å¼åŒ–æ—¥æœŸ
};

var formatPrice = function(price) {
  // æ ¼å¼åŒ–ä»·æ ¼
};

// æ±¡æŸ“å…¨å±€å‘½åç©ºé—´
```

```javascript
// api.js - ä¾èµ–ä¸æ˜ç¡®
// è¿™ä¸ªæ–‡ä»¶ä¾èµ– jQueryï¼Œä½†ä¸çŸ¥é“
$.get('/api/users', function(users) {
  // ä½¿ç”¨ formatDateï¼Œä½†ä¸çŸ¥é“ä»å“ªæ¥
  users.forEach(function(user) {
    console.log(formatDate(user.createdAt));
  });
});
```

```javascript
// app.js - ä¾èµ–æ··ä¹±
// ä¾èµ– utils.jsã€api.jsï¼Œä½†é¡ºåºé”™äº†ä¼šæŠ¥é”™
function initApp() {
  // ä½¿ç”¨å…¨å±€å˜é‡
  var price = formatPrice(100);
}

initApp();
```

**é—®é¢˜**ï¼š
- å…¨å±€å˜é‡æ±¡æŸ“ï¼šæ‰€æœ‰å˜é‡éƒ½åœ¨å…¨å±€
- ä¾èµ–ä¸æ˜ç¡®ï¼šä¸çŸ¥é“ä¾èµ–å“ªäº›æ¨¡å—
- é¡ºåºä¾èµ–ï¼šè„šæœ¬åŠ è½½é¡ºåºé”™è¯¯ä¼šæŠ¥é”™
- éš¾ä»¥ç»´æŠ¤ï¼šä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶å¯èƒ½å½±å“å…¶ä»–æ–‡ä»¶

---

#### âœ… ä½¿ç”¨ ES6 æ¨¡å—åŒ–è§£å†³

```javascript
// utils/date.js - æ—¥æœŸå·¥å…·æ¨¡å—
export function formatDate(date, format = 'YYYY-MM-DD') {
  // æ ¼å¼åŒ–æ—¥æœŸ
  return new Date(date).toLocaleDateString();
}

export function parseDate(dateStr) {
  // è§£ææ—¥æœŸ
  return new Date(dateStr);
}

export function getDaysAgo(days) {
  const date = new Date();
  date.setDate(date.getDate() - days);
  return date;
}
```

```javascript
// utils/price.js - ä»·æ ¼å·¥å…·æ¨¡å—
export function formatPrice(price, currency = 'Â¥') {
  return `${currency}${price.toFixed(2)}`;
}

export function calculateDiscount(price, discount) {
  return price * (1 - discount);
}
```

```javascript
// api/userApi.js - ç”¨æˆ· API æ¨¡å—
import { formatDate } from '../utils/date.js';

export async function getUsers() {
  const response = await fetch('/api/users');
  const users = await response.json();

  // æ ¼å¼åŒ–æ—¥æœŸ
  return users.map(user => ({
    ...user,
    createdAt: formatDate(user.createdAt),
  }));
}

export async function getUserById(id) {
  const response = await fetch(`/api/users/${id}`);
  return response.json();
}

export async function createUser(userData) {
  const response = await fetch('/api/users', {
    method: 'POST',
    body: JSON.stringify(userData),
  });
  return response.json();
}
```

```javascript
// app.js - ä¸»åº”ç”¨
import { getUsers } from './api/userApi.js';
import { formatPrice } from './utils/price.js';

async function initApp() {
  // ä¾èµ–æ˜ç¡®ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€
  const users = await getUsers();
  console.log('Users:', users);

  const price = formatPrice(100);
  console.log('Price:', price);
}

initApp();
```

```html
<!-- index.html - åªéœ€å¼•å…¥å…¥å£æ–‡ä»¶ -->
<!DOCTYPE html>
<html>
<head>
  <title>åº”ç”¨</title>
</head>
<body>
  <div id="app"></div>

  <!-- ä½¿ç”¨ type="module" -->
  <script type="module" src="app.js"></script>
</body>
</html>
```

**æ•ˆæœ**ï¼š
- âœ… æ— å…¨å±€æ±¡æŸ“ï¼šæ¯ä¸ªæ¨¡å—æœ‰è‡ªå·±çš„ä½œç”¨åŸŸ
- âœ… ä¾èµ–æ˜ç¡®ï¼šimport å£°æ˜ä¾èµ–å…³ç³»
- âœ… æŒ‰éœ€åŠ è½½ï¼šåªåŠ è½½éœ€è¦çš„æ¨¡å—
- âœ… æ˜“äºç»´æŠ¤ï¼šæ¨¡å—èŒè´£å•ä¸€

---

### ğŸ¯ æ¨¡å—åŒ–è§„èŒƒå¯¹æ¯”

#### 1. ES6 Moduleï¼ˆæ¨èï¼‰

```javascript
// å¯¼å‡º
export const PI = 3.14;
export function add(a, b) {
  return a + b;
}

// é»˜è®¤å¯¼å‡º
export default class Calculator {
  // ...
}

// å¯¼å…¥
import Calculator, { PI, add } from './calculator.js';
```

**ç‰¹ç‚¹**ï¼š
- é™æ€å¯¼å…¥ï¼ˆç¼–è¯‘æ—¶ç¡®å®šä¾èµ–ï¼‰
- Tree Shakingï¼ˆæœªä½¿ç”¨çš„ä»£ç ä¼šè¢«åˆ é™¤ï¼‰
- æµè§ˆå™¨åŸç”Ÿæ”¯æŒ

#### 2. CommonJSï¼ˆNode.jsï¼‰

```javascript
// å¯¼å‡º
module.exports = {
  PI: 3.14,
  add: function(a, b) {
    return a + b;
  }
};

// æˆ–è€…
exports.PI = 3.14;
exports.add = function(a, b) {
  return a + b;
};

// å¯¼å…¥
const { PI, add } = require('./calculator');
```

**ç‰¹ç‚¹**ï¼š
- åŠ¨æ€å¯¼å…¥ï¼ˆè¿è¡Œæ—¶åŠ è½½ï¼‰
- åŒæ­¥åŠ è½½
- Node.js æ ‡å‡†

#### 3. AMDï¼ˆå·²è¿‡æ—¶ï¼‰

```javascript
// å®šä¹‰æ¨¡å—
define(['jquery', 'lodash'], function($, _) {
  return {
    init: function() {
      // ...
    }
  };
});

// ä½¿ç”¨æ¨¡å—
require(['app'], function(app) {
  app.init();
});
```

**ç‰¹ç‚¹**ï¼š
- å¼‚æ­¥åŠ è½½
- ä¸»è¦ç”¨äºæµè§ˆå™¨
- RequireJS å®ç°

---

### ğŸ—ï¸ æ¨¡å—ç»„ç»‡æœ€ä½³å®è·µ

#### æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡

```
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth/              # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ authApi.js
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.jsx
â”‚   â”‚   â”‚   â””â”€â”€ RegisterForm.jsx
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â””â”€â”€ useAuth.js
â”‚   â”‚   â””â”€â”€ index.js       # æ¨¡å—å…¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ products/          # å•†å“æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚
â”‚   â””â”€â”€ cart/              # è´­ç‰©è½¦æ¨¡å—
â”‚       â”œâ”€â”€ api/
â”‚       â”œâ”€â”€ components/
â”‚       â”œâ”€â”€ hooks/
â”‚       â””â”€â”€ index.js
â”‚
â”œâ”€â”€ shared/                # å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ components/        # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/            # é€šç”¨ Hooks
â”‚   â””â”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚
â””â”€â”€ App.jsx
```

#### æ¨¡å—å…¥å£æ–‡ä»¶

```javascript
// modules/auth/index.js - ç»Ÿä¸€å¯¼å‡ºæ¥å£
export { default as LoginForm } from './components/LoginForm';
export { default as RegisterForm } from './components/RegisterForm';
export { useAuth } from './hooks/useAuth';
export * as authApi from './api/authApi';
```

```javascript
// åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨
import { LoginForm, useAuth, authApi } from './modules/auth';
```

---

### âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ

#### âœ… ä¼˜ç‚¹

1. **é¿å…å…¨å±€æ±¡æŸ“**ï¼šæ¯ä¸ªæ¨¡å—ç‹¬ç«‹ä½œç”¨åŸŸ
2. **ä¾èµ–æ˜ç¡®**ï¼šæ¸…æ™°çš„å¯¼å…¥å¯¼å‡º
3. **æŒ‰éœ€åŠ è½½**ï¼šåªåŠ è½½éœ€è¦çš„ä»£ç 
4. **æ˜“äºç»´æŠ¤**ï¼šæ¨¡å—èŒè´£å•ä¸€
5. **Tree Shaking**ï¼šåˆ é™¤æœªä½¿ç”¨ä»£ç 

#### âŒ ç¼ºç‚¹

1. **é…ç½®å¤æ‚**ï¼šéœ€è¦æ„å»ºå·¥å…·ï¼ˆWebpackã€Viteï¼‰
2. **å…¼å®¹æ€§**ï¼šæ—§æµè§ˆå™¨ä¸æ”¯æŒ ES6 Module
3. **å­¦ä¹ æˆæœ¬**ï¼šéœ€è¦ç†è§£æ¨¡å—ç³»ç»Ÿ

---

## Flux/Redux å•å‘æ•°æ®æµ

### ğŸ’¡ æ¨¡å¼å®šä¹‰
Flux æ˜¯ Facebook æå‡ºçš„åº”ç”¨æ¶æ„ï¼Œå¼ºè°ƒ**å•å‘æ•°æ®æµ**ã€‚Redux æ˜¯ Flux çš„å®ç°ï¼Œé€šè¿‡å•ä¸€çŠ¶æ€æ ‘ç®¡ç†åº”ç”¨çŠ¶æ€ã€‚

### ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ Flux/Reduxï¼Ÿ

#### é—®é¢˜åœºæ™¯ï¼šå¤æ‚çš„çŠ¶æ€ç®¡ç†

åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œç»„ä»¶é—´çŠ¶æ€å…±äº«å˜å¾—å¤æ‚ï¼š

#### âŒ ä¸ä½¿ç”¨çŠ¶æ€ç®¡ç†çš„ç—›ç‚¹

```javascript
// App.jsx - Props å±‚å±‚ä¼ é€’ï¼ˆProps Drillingï¼‰
function App() {
  const [user, setUser] = React.useState(null);
  const [cart, setCart] = React.useState([]);
  const [notifications, setNotifications] = React.useState([]);

  return (
    <div>
      <Header
        user={user}
        cartCount={cart.length}
        notifications={notifications}
        onLogout={() => setUser(null)}
      />
      <ProductList
        user={user}
        cart={cart}
        onAddToCart={(product) => setCart([...cart, product])}
      />
      <CartSidebar
        cart={cart}
        onRemove={(id) => setCart(cart.filter(p => p.id !== id))}
      />
    </div>
  );
}

// Header éœ€è¦ä¼ é€’ç»™å­ç»„ä»¶
function Header({ user, cartCount, notifications, onLogout }) {
  return (
    <header>
      <UserMenu user={user} onLogout={onLogout} />
      <CartBadge count={cartCount} />
      <Notifications items={notifications} />
    </header>
  );
}

// å±‚å±‚ä¼ é€’ï¼Œéå¸¸ç¹çï¼
```

**é—®é¢˜**ï¼š
- Props Drillingï¼šçŠ¶æ€å±‚å±‚ä¼ é€’
- éš¾ä»¥è¿½è¸ªï¼šä¸çŸ¥é“çŠ¶æ€ä»å“ªæ¥
- éš¾ä»¥ç»´æŠ¤ï¼šä¿®æ”¹çŠ¶æ€å½±å“å¤šä¸ªç»„ä»¶
- çŠ¶æ€åŒæ­¥ï¼šå¤šä¸ªç»„ä»¶ä½¿ç”¨åŒä¸€çŠ¶æ€å¾ˆå›°éš¾

---

#### âœ… ä½¿ç”¨ Redux è§£å†³

```javascript
// store/store.js - åˆ›å»º Store
import { createStore, combineReducers } from 'redux';
import userReducer from './reducers/userReducer';
import cartReducer from './reducers/cartReducer';
import notificationsReducer from './reducers/notificationsReducer';

const rootReducer = combineReducers({
  user: userReducer,
  cart: cartReducer,
  notifications: notificationsReducer,
});

const store = createStore(rootReducer);

export default store;
```

```javascript
// store/reducers/cartReducer.js - Cart Reducer
const initialState = {
  items: [],
};

function cartReducer(state = initialState, action) {
  switch (action.type) {
    case 'CART_ADD_ITEM':
      return {
        ...state,
        items: [...state.items, action.payload],
      };

    case 'CART_REMOVE_ITEM':
      return {
        ...state,
        items: state.items.filter(item => item.id !== action.payload),
      };

    case 'CART_CLEAR':
      return {
        ...state,
        items: [],
      };

    default:
      return state;
  }
}

export default cartReducer;
```

```javascript
// store/actions/cartActions.js - Action Creators
export const addToCart = (product) => ({
  type: 'CART_ADD_ITEM',
  payload: product,
});

export const removeFromCart = (productId) => ({
  type: 'CART_REMOVE_ITEM',
  payload: productId,
});

export const clearCart = () => ({
  type: 'CART_CLEAR',
});
```

```javascript
// App.jsx - ä½¿ç”¨ Provider
import { Provider } from 'react-redux';
import store from './store/store';

function App() {
  return (
    <Provider store={store}>
      <Header />
      <ProductList />
      <CartSidebar />
    </Provider>
  );
}

export default App;
```

```javascript
// components/ProductCard.jsx - ä½¿ç”¨ useDispatch
import { useDispatch } from 'react-redux';
import { addToCart } from '../store/actions/cartActions';

function ProductCard({ product }) {
  const dispatch = useDispatch();

  const handleAddToCart = () => {
    dispatch(addToCart(product));
  };

  return (
    <div className="product-card">
      <h3>{product.name}</h3>
      <p>Â¥{product.price}</p>
      <button onClick={handleAddToCart}>åŠ å…¥è´­ç‰©è½¦</button>
    </div>
  );
}
```

```javascript
// components/CartBadge.jsx - ä½¿ç”¨ useSelector
import { useSelector } from 'react-redux';

function CartBadge() {
  const cartCount = useSelector(state => state.cart.items.length);

  return (
    <div className="cart-badge">
      ğŸ›’ {cartCount > 0 && <span>{cartCount}</span>}
    </div>
  );
}
```

**æ•ˆæœ**ï¼š
- âœ… å•ä¸€æ•°æ®æºï¼šæ‰€æœ‰çŠ¶æ€åœ¨ä¸€ä¸ª Store
- âœ… çŠ¶æ€åªè¯»ï¼šåªèƒ½é€šè¿‡ Action ä¿®æ”¹
- âœ… çº¯å‡½æ•°æ›´æ–°ï¼šReducer æ˜¯çº¯å‡½æ•°
- âœ… å¯é¢„æµ‹ï¼šç›¸åŒè¾“å…¥æ€»æ˜¯ç›¸åŒè¾“å‡º
- âœ… æ˜“äºè°ƒè¯•ï¼šRedux DevTools æ—¶é—´æ—…è¡Œ

---

### ğŸ¯ Redux æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View   â”‚ â”€â”€dispatchâ”€â”€> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ Action  â”‚
     â†‘                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                        â”‚
     â”‚                        â†“
     â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                   â”‚Reducer â”‚
     â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                        â”‚
     â”‚                        â†“
     â””â”€â”€â”€â”€â”€â”€â”€subscribeâ”€â”€  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ Store  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

1. **View è§¦å‘ Action**ï¼šç”¨æˆ·ç‚¹å‡»æŒ‰é’® â†’ dispatch(addToCart(product))
2. **Action ä¼ é€’ç»™ Reducer**ï¼šReducer æ¥æ”¶ action å’Œå½“å‰ state
3. **Reducer è¿”å›æ–° State**ï¼šæ ¹æ® action.type è®¡ç®—æ–°çŠ¶æ€
4. **Store æ›´æ–°**ï¼šStore ä¿å­˜æ–°çŠ¶æ€
5. **View æ›´æ–°**ï¼šè®¢é˜…äº† Store çš„ç»„ä»¶è‡ªåŠ¨é‡æ–°æ¸²æŸ“

---

### ğŸ—ï¸ Redux Toolkitï¼ˆæ¨èï¼‰

Redux Toolkit æ˜¯å®˜æ–¹æ¨èçš„ Redux å·¥å…·é›†ï¼Œç®€åŒ–äº† Redux çš„ä½¿ç”¨ï¼š

```javascript
// store/slices/cartSlice.js
import { createSlice } from '@reduxjs/toolkit';

const cartSlice = createSlice({
  name: 'cart',
  initialState: {
    items: [],
  },
  reducers: {
    addItem: (state, action) => {
      // Immer æ”¯æŒç›´æ¥ä¿®æ”¹ state
      state.items.push(action.payload);
    },
    removeItem: (state, action) => {
      state.items = state.items.filter(item => item.id !== action.payload);
    },
    clearCart: (state) => {
      state.items = [];
    },
  },
});

export const { addItem, removeItem, clearCart } = cartSlice.actions;
export default cartSlice.reducer;
```

```javascript
// store/store.js
import { configureStore } from '@reduxjs/toolkit';
import cartReducer from './slices/cartSlice';
import userReducer from './slices/userSlice';

const store = configureStore({
  reducer: {
    cart: cartReducer,
    user: userReducer,
  },
});

export default store;
```

```javascript
// ä½¿ç”¨
import { useDispatch, useSelector } from 'react-redux';
import { addItem } from './store/slices/cartSlice';

function ProductCard({ product }) {
  const dispatch = useDispatch();
  const cartItems = useSelector(state => state.cart.items);

  return (
    <button onClick={() => dispatch(addItem(product))}>
      åŠ å…¥è´­ç‰©è½¦ ({cartItems.length})
    </button>
  );
}
```

---

### âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ

#### âœ… ä¼˜ç‚¹

1. **å•ä¸€æ•°æ®æº**ï¼šçŠ¶æ€é›†ä¸­ç®¡ç†
2. **å¯é¢„æµ‹**ï¼šçŠ¶æ€å˜åŒ–å¯è¿½è¸ª
3. **æ˜“äºè°ƒè¯•**ï¼šRedux DevTools
4. **æ—¶é—´æ—…è¡Œ**ï¼šå¯ä»¥å›æº¯çŠ¶æ€
5. **ä¸­é—´ä»¶æ”¯æŒ**ï¼šRedux Thunkã€Redux Saga

#### âŒ ç¼ºç‚¹

1. **æ ·æ¿ä»£ç å¤š**ï¼šActionã€Reducerã€Store
2. **å­¦ä¹ æ›²çº¿**ï¼šæ¦‚å¿µè¾ƒå¤š
3. **å°é¡¹ç›®è¿‡åº¦**ï¼šç®€å•åº”ç”¨ä¸éœ€è¦
4. **æ€§èƒ½å¼€é”€**ï¼šæ‰€æœ‰çŠ¶æ€åœ¨ä¸€ä¸ªå¯¹è±¡

---

### ğŸ“‹ ä½•æ—¶ä½¿ç”¨ Redux

#### âœ… é€‚åˆä½¿ç”¨çš„åœºæ™¯

- å¤§å‹åº”ç”¨ï¼ŒçŠ¶æ€å¤æ‚
- å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€
- éœ€è¦æ’¤é”€/é‡åš
- éœ€è¦çŠ¶æ€æŒä¹…åŒ–
- éœ€è¦æ—¶é—´æ—…è¡Œè°ƒè¯•

#### âŒ ä¸é€‚åˆä½¿ç”¨çš„åœºæ™¯

- å°å‹åº”ç”¨
- çŠ¶æ€ç®€å•ï¼Œåªåœ¨å°‘æ•°ç»„ä»¶ä½¿ç”¨
- ä½¿ç”¨ Context API å°±å¤Ÿäº†

---

## ğŸ“ æ€»ç»“

### å‰ç«¯æ¶æ„æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | æ ¸å¿ƒç›®çš„ | ä½¿ç”¨åœºæ™¯ | ä¼˜å…ˆçº§ |
|-----|---------|---------|-------|
| **MVC/MVVM** | åˆ†å±‚æ¶æ„ | ä¸­å¤§å‹åº”ç”¨ | â­â­â­â­ |
| **ç»„ä»¶åŒ–** | UI å¤ç”¨ | æ‰€æœ‰ React/Vue é¡¹ç›® | â­â­â­â­â­ |
| **æ¨¡å—åŒ–** | ä»£ç ç»„ç»‡ | æ‰€æœ‰é¡¹ç›® | â­â­â­â­â­ |
| **Flux/Redux** | çŠ¶æ€ç®¡ç† | å¤æ‚çŠ¶æ€å…±äº« | â­â­â­â­ |

### å­¦ä¹ å»ºè®®

1. **MVC/MVVM**ï¼šç†è§£æ¡†æ¶è®¾è®¡æ€æƒ³ï¼ŒVue æ˜¯å¤©ç”Ÿçš„ MVVM
2. **ç»„ä»¶åŒ–**ï¼šReact/Vue å¼€å‘å¿…å¤‡ï¼ŒæŒæ¡ç»„ä»¶è®¾è®¡åŸåˆ™
3. **æ¨¡å—åŒ–**ï¼šES6 Module æ˜¯æ ‡å‡†ï¼Œå¿…é¡»æŒæ¡
4. **Redux**ï¼šå¤§å‹åº”ç”¨å¿…å¤‡ï¼Œä½†å°é¡¹ç›®ç”¨ Context å°±å¤Ÿ

### æ¶æ„é€‰å‹å»ºè®®

#### å°å‹é¡¹ç›®ï¼ˆ< 10 ä¸ªé¡µé¢ï¼‰
- React + Hooks + Context API
- Vue 3 + Composition API
- ç®€å•çš„ç›®å½•ç»“æ„

#### ä¸­å‹é¡¹ç›®ï¼ˆ10-50 ä¸ªé¡µé¢ï¼‰
- React + Redux Toolkit
- Vue 3 + Pinia
- æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡

#### å¤§å‹é¡¹ç›®ï¼ˆ> 50 ä¸ªé¡µé¢ï¼‰
- React + Redux Toolkit + TypeScript
- Vue 3 + Pinia + TypeScript
- å¾®å‰ç«¯æ¶æ„
- Monorepo ç®¡ç†

---

## ğŸ‰ æ­å–œä½ å®Œæˆæ‰€æœ‰è®¾è®¡æ¨¡å¼çš„å­¦ä¹ ï¼

ä½ å·²ç»æŒæ¡äº†ï¼š
- âœ… **12 ä¸ªç»å…¸è®¾è®¡æ¨¡å¼**
- âœ… **4 ä¸ªå‰ç«¯æ¶æ„æ¨¡å¼**
- âœ… **40+ ä¸ªçœŸå®ä¸šåŠ¡åœºæ™¯**
- âœ… **180+ ä¸ªä»£ç ç¤ºä¾‹**

### ä¸‹ä¸€æ­¥

1. **å®è·µ**ï¼šåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›æ¨¡å¼
2. **é‡æ„**ï¼šç”¨è®¾è®¡æ¨¡å¼é‡æ„ç°æœ‰ä»£ç 
3. **æ·±å…¥**ï¼šé˜…è¯»æ¡†æ¶æºç ï¼Œç†è§£æ¨¡å¼åº”ç”¨
4. **åˆ†äº«**ï¼šæ•™åˆ«äººæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼

**è®°ä½**ï¼šè®¾è®¡æ¨¡å¼ä¸æ˜¯é“¶å¼¹ï¼Œä¸è¦ä¸ºäº†ç”¨æ¨¡å¼è€Œç”¨æ¨¡å¼ã€‚æ ¹æ®å®é™…åœºæ™¯é€‰æ‹©åˆé€‚çš„æ¨¡å¼ï¼Œæ‰èƒ½å†™å‡ºä¼˜é›…ã€å¯ç»´æŠ¤çš„ä»£ç ã€‚

ç¥ä½ åœ¨å‰ç«¯å¼€å‘çš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼ğŸš€
