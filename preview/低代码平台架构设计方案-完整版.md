# ä½ä»£ç å¹³å°æ¶æ„è®¾è®¡æ–¹æ¡ˆ - ä»ç®€å…¥æ·±å®Œæ•´æŒ‡å—

## ç›®å½•

1. [ä½ä»£ç å¹³å°æ ¸å¿ƒæ¦‚å¿µ](#ä¸€ä½ä»£ç å¹³å°æ ¸å¿ƒæ¦‚å¿µ)
2. [é˜¶æ®µä¸€:æœ€ç®€å®ç°](#äºŒé˜¶æ®µä¸€æœ€ç®€å®ç°---å•ä½“æ¶æ„)
3. [é˜¶æ®µäºŒ:ç‰©æ–™ç‹¬ç«‹](#ä¸‰é˜¶æ®µäºŒç‰©æ–™ç‹¬ç«‹---æ’ä»¶åŒ–æ¶æ„)
4. [é˜¶æ®µä¸‰:ä¼ä¸šçº§æ–¹æ¡ˆ](#å››é˜¶æ®µä¸‰ä¼ä¸šçº§æ–¹æ¡ˆ---å¾®å†…æ ¸æ¶æ„)
5. [æ„å»ºå·¥å…·é“¾è®¾è®¡](#äº”æ„å»ºå·¥å…·é“¾è®¾è®¡)
6. [ç‰©æ–™ç”Ÿæ€ä½“ç³»](#å…­ç‰©æ–™ç”Ÿæ€ä½“ç³»)
7. [æ€§èƒ½ä¸å®‰å…¨](#ä¸ƒæ€§èƒ½ä¸å®‰å…¨)
8. [å®æˆ˜æ¡ˆä¾‹](#å…«å®æˆ˜æ¡ˆä¾‹)

---

## ä¸€ã€ä½ä»£ç å¹³å°æ ¸å¿ƒæ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯ä½ä»£ç å¹³å°?

ä½ä»£ç å¹³å°çš„æœ¬è´¨æ˜¯:**å°†å¼€å‘è¿‡ç¨‹å¯è§†åŒ–,é€šè¿‡æ‹–æ‹½é…ç½®ç”Ÿæˆåº”ç”¨,è€Œéæ‰‹å†™ä»£ç **ã€‚

æ ¸å¿ƒå·¥ä½œæµ:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯è§†åŒ–ç¼–è¾‘  â”‚ ---> â”‚  Schema  â”‚ ---> â”‚  æ¸²æŸ“å¼•æ“   â”‚ ---> â”‚ è¿è¡Œåº”ç”¨ â”‚
â”‚  (è®¾è®¡å™¨)   â”‚      â”‚  (JSON)  â”‚      â”‚ (Runtime)  â”‚      â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ ¸å¿ƒç»„æˆéƒ¨åˆ†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä½ä»£ç å¹³å°                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   è®¾è®¡å™¨      â”‚  â”‚   ç‰©æ–™åº“      â”‚  â”‚   æ¸²æŸ“å¼•æ“    â”‚      â”‚
â”‚  â”‚   Designer   â”‚  â”‚   Materials  â”‚  â”‚   Renderer   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                            â†“                                 â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                     â”‚    Schema    â”‚                         â”‚
â”‚                     â”‚    åè®®      â”‚                         â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸‰å¤§æ ¸å¿ƒ:**

1. **Schemaåè®®**: é¡µé¢çš„JSONæè¿°è¯­è¨€
2. **ç‰©æ–™ä½“ç³»**: å¯è¢«æ‹–æ‹½ä½¿ç”¨çš„ç»„ä»¶
3. **æ¸²æŸ“å¼•æ“**: å°†Schemaè½¬æ¢ä¸ºçœŸå®UI

### 1.3 Schemaåè®®ç¤ºä¾‹

```json
{
  "version": "1.0.0",
  "componentTree": {
    "componentName": "Page",
    "props": { "title": "ç”¨æˆ·åˆ—è¡¨" },
    "children": [
      {
        "componentName": "Button",
        "props": {
          "type": "primary",
          "children": "æ–°å¢ç”¨æˆ·"
        },
        "events": {
          "onClick": {
            "type": "navigate",
            "payload": { "url": "/user/create" }
          }
        }
      }
    ]
  }
}
```

**Schemaçš„å…³é”®ç‰¹æ€§:**
- **å£°æ˜å¼**: æè¿°"æ˜¯ä»€ä¹ˆ",è€Œé"æ€ä¹ˆåš"
- **å¯åºåˆ—åŒ–**: çº¯JSON,å¯å­˜å‚¨ã€ä¼ è¾“ã€ç‰ˆæœ¬ç®¡ç†
- **å¯è§£æ**: æ¸²æŸ“å¼•æ“å¯ç†è§£å¹¶æ‰§è¡Œ

---

## äºŒã€é˜¶æ®µä¸€:æœ€ç®€å®ç° - å•ä½“æ¶æ„

> **é€‚ç”¨åœºæ™¯**: MVPéªŒè¯ã€å°å‹å›¢é˜Ÿã€å¿«é€Ÿè¿­ä»£
> **ç‰¹ç‚¹**: æ‰€æœ‰ä»£ç åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­,ç‰©æ–™å†…ç½®,æ¶æ„ç®€å•

### 2.1 é¡¹ç›®ç»“æ„

```
lowcode-platform/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ designer/              # è®¾è®¡å™¨
â”‚   â”‚   â”œâ”€â”€ Canvas.jsx         # ç”»å¸ƒ
â”‚   â”‚   â”œâ”€â”€ MaterialPanel.jsx  # ç‰©æ–™é¢æ¿
â”‚   â”‚   â”œâ”€â”€ SettingPanel.jsx   # å±æ€§é…ç½®
â”‚   â”‚   â””â”€â”€ Toolbar.jsx        # å·¥å…·æ 
â”‚   â”‚
â”‚   â”œâ”€â”€ renderer/              # æ¸²æŸ“å¼•æ“
â”‚   â”‚   â”œâ”€â”€ Renderer.jsx       # æ ¸å¿ƒæ¸²æŸ“å™¨
â”‚   â”‚   â”œâ”€â”€ ExpressionParser.js # è¡¨è¾¾å¼è§£æ
â”‚   â”‚   â””â”€â”€ EventHandler.js    # äº‹ä»¶å¤„ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ materials/             # ç‰©æ–™(å†…ç½®)
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Input/
â”‚   â”‚   â”œâ”€â”€ Table/
â”‚   â”‚   â””â”€â”€ index.js           # ç‰©æ–™æ³¨å†Œ
â”‚   â”‚
â”‚   â”œâ”€â”€ schema/                # Schemaç›¸å…³
â”‚   â”‚   â””â”€â”€ protocol.js        # Schemaåè®®å®šä¹‰
â”‚   â”‚
â”‚   â””â”€â”€ App.jsx                # å…¥å£
â”‚
â””â”€â”€ package.json
```

### 2.2 æœ€ç®€æ¸²æŸ“å¼•æ“å®ç°

```javascript
// renderer/Renderer.jsx
import React from 'react';
import * as Materials from '../materials';

class SimpleRenderer extends React.Component {
  constructor(props) {
    super(props);
    this.schema = props.schema;
  }

  // é€’å½’æ¸²æŸ“ç»„ä»¶æ ‘
  renderNode(nodeSchema) {
    const { componentName, props, children, id } = nodeSchema;

    // 1. ä»ç‰©æ–™åº“è·å–ç»„ä»¶
    const Component = Materials[componentName];
    if (!Component) {
      console.warn(`Component ${componentName} not found`);
      return null;
    }

    // 2. é€’å½’æ¸²æŸ“å­èŠ‚ç‚¹
    const childNodes = children?.map((child, index) =>
      this.renderNode(child)
    );

    // 3. è¿”å›Reactå…ƒç´ 
    return React.createElement(
      Component,
      { key: id, ...props },
      childNodes
    );
  }

  render() {
    return this.renderNode(this.schema.componentTree);
  }
}

export default SimpleRenderer;
```

**ä½¿ç”¨ç¤ºä¾‹:**
```javascript
// å®šä¹‰Schema
const schema = {
  componentTree: {
    componentName: 'div',
    props: { className: 'container' },
    children: [
      {
        componentName: 'Button',
        props: { type: 'primary', children: 'ç‚¹å‡»æˆ‘' }
      }
    ]
  }
};

// æ¸²æŸ“
<SimpleRenderer schema={schema} />
```

### 2.3 ç‰©æ–™å®šä¹‰(å†…ç½®æ–¹å¼)

```javascript
// materials/Button/index.jsx
import React from 'react';
import './style.css';

function Button({ type, children, onClick }) {
  return (
    <button className={`btn btn-${type}`} onClick={onClick}>
      {children}
    </button>
  );
}

// ç‰©æ–™å…ƒä¿¡æ¯(ç”¨äºè®¾è®¡å™¨)
Button.meta = {
  title: 'æŒ‰é’®',
  category: 'basic',
  props: [
    {
      name: 'type',
      title: 'ç±»å‹',
      type: 'select',
      options: ['primary', 'default', 'danger']
    },
    {
      name: 'children',
      title: 'æ–‡æœ¬',
      type: 'string'
    }
  ]
};

export default Button;
```

```javascript
// materials/index.js - ç‰©æ–™æ³¨å†Œ
export { default as Button } from './Button';
export { default as Input } from './Input';
export { default as Table } from './Table';
```

### 2.4 ç®€å•è®¾è®¡å™¨å®ç°

```javascript
// designer/Designer.jsx
import React, { useState } from 'react';
import MaterialPanel from './MaterialPanel';
import Canvas from './Canvas';
import SettingPanel from './SettingPanel';
import SimpleRenderer from '../renderer/Renderer';
import * as Materials from '../materials';

function Designer() {
  const [schema, setSchema] = useState({
    componentTree: {
      componentName: 'div',
      props: {},
      children: []
    }
  });

  const [selectedNode, setSelectedNode] = useState(null);

  // æ·»åŠ ç»„ä»¶
  const addComponent = (materialName) => {
    const material = Materials[materialName];
    const newNode = {
      id: `node_${Date.now()}`,
      componentName: materialName,
      props: { ...material.meta.defaultProps },
      children: []
    };

    // ç®€åŒ–:ç›´æ¥æ·»åŠ åˆ°æ ¹èŠ‚ç‚¹
    schema.componentTree.children.push(newNode);
    setSchema({ ...schema });
  };

  // æ›´æ–°å±æ€§
  const updateProps = (nodeId, newProps) => {
    // é€’å½’æŸ¥æ‰¾å¹¶æ›´æ–°èŠ‚ç‚¹
    const updateNode = (node) => {
      if (node.id === nodeId) {
        node.props = { ...node.props, ...newProps };
        return true;
      }
      return node.children?.some(updateNode);
    };

    updateNode(schema.componentTree);
    setSchema({ ...schema });
  };

  return (
    <div className="designer-layout">
      {/* å·¦ä¾§:ç‰©æ–™é¢æ¿ */}
      <MaterialPanel
        materials={Object.keys(Materials)}
        onAdd={addComponent}
      />

      {/* ä¸­é—´:ç”»å¸ƒ */}
      <Canvas>
        <SimpleRenderer schema={schema} />
      </Canvas>

      {/* å³ä¾§:å±æ€§é…ç½® */}
      <SettingPanel
        node={selectedNode}
        onPropsChange={updateProps}
      />
    </div>
  );
}
```

### 2.5 é˜¶æ®µä¸€æ€»ç»“

**ä¼˜ç‚¹:**
- âœ… ç»“æ„ç®€å•,æ˜“äºç†è§£å’Œä¸Šæ‰‹
- âœ… å¼€å‘æ•ˆç‡é«˜,æ— éœ€å¤æ‚çš„æ„å»ºé…ç½®
- âœ… é€‚åˆå¿«é€ŸéªŒè¯æƒ³æ³•

**ç¼ºç‚¹:**
- âŒ ç‰©æ–™å†…ç½®,æ— æ³•åŠ¨æ€æ‰©å±•
- âŒ æ‰€æœ‰ä»£ç è€¦åˆåœ¨ä¸€èµ·,éš¾ä»¥ç»´æŠ¤
- âŒ æ— æ³•æ”¯æŒç¬¬ä¸‰æ–¹ç‰©æ–™
- âŒ æ‰“åŒ…ä½“ç§¯å¤§(æ‰€æœ‰ç‰©æ–™æ‰“åŒ…åœ¨ä¸€èµ·)

**é€‚ç”¨åœºæ™¯:**
- MVPé˜¶æ®µ
- å›¢é˜Ÿå°‘äº5äºº
- ç‰©æ–™æ•°é‡å°‘äº20ä¸ª

---

## ä¸‰ã€é˜¶æ®µäºŒ:ç‰©æ–™ç‹¬ç«‹ - æ’ä»¶åŒ–æ¶æ„

> **æ ¸å¿ƒæ”¹è¿›**: ç‰©æ–™æŠ½ç¦»ä¸ºç‹¬ç«‹NPMåŒ…,æ”¯æŒæŒ‰éœ€åŠ è½½
> **è§£å†³é—®é¢˜**: ç‰©æ–™å¤ç”¨ã€æŒ‰éœ€åŠ è½½ã€ç¬¬ä¸‰æ–¹æ‰©å±•

### 3.1 æ¶æ„æ¼”è¿›

```
é˜¶æ®µä¸€(å•ä½“):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   lowcode-platform              â”‚
â”‚   â”œâ”€â”€ designer/                 â”‚
â”‚   â”œâ”€â”€ renderer/                 â”‚
â”‚   â””â”€â”€ materials/ (å†…ç½®)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                â†“ æ¼”è¿›

é˜¶æ®µäºŒ(ç‰©æ–™ç‹¬ç«‹):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ lowcode-platform   â”‚     â”‚  Material Packagesâ”‚
â”‚ â”œâ”€â”€ designer/      â”‚     â”‚  @lc/button      â”‚
â”‚ â”œâ”€â”€ renderer/      â”‚ <-- â”‚  @lc/table       â”‚
â”‚ â””â”€â”€ material-      â”‚     â”‚  @lc/form        â”‚
â”‚     registry/      â”‚     â”‚  ...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ç‰©æ–™åŒ…ç»“æ„

```
@lowcode-materials/button/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Button.jsx           # ç»„ä»¶å®ç°
â”‚   â””â”€â”€ index.js             # å¯¼å‡º
â”‚
â”œâ”€â”€ lowcode-meta.json        # ç‰©æ–™å…ƒä¿¡æ¯
â”œâ”€â”€ package.json
â””â”€â”€ README.md

# lowcode-meta.json
{
  "name": "Button",
  "title": "æŒ‰é’®",
  "category": "basic",
  "version": "1.0.0",
  "main": "dist/index.js",
  "props": [
    {
      "name": "type",
      "title": "ç±»å‹",
      "setter": "SelectSetter",
      "options": ["primary", "default", "danger"]
    }
  ],
  "snippets": {
    "componentName": "Button",
    "props": { "type": "primary", "children": "æŒ‰é’®" }
  }
}
```

### 3.3 ç‰©æ–™æ³¨å†Œè¡¨

```javascript
// material-registry/MaterialRegistry.js
class MaterialRegistry {
  constructor() {
    this.materials = new Map();    // å·²åŠ è½½çš„ç‰©æ–™
    this.metadata = new Map();     // ç‰©æ–™å…ƒä¿¡æ¯
  }

  // æ³¨å†Œç‰©æ–™
  register(packageName, config) {
    const { component, meta } = config;

    this.materials.set(meta.name, component);
    this.metadata.set(meta.name, {
      packageName,
      ...meta
    });

    console.log(`âœ… Material registered: ${meta.name}`);
  }

  // è·å–ç»„ä»¶
  getComponent(componentName) {
    return this.materials.get(componentName);
  }

  // è·å–å…ƒä¿¡æ¯
  getMeta(componentName) {
    return this.metadata.get(componentName);
  }

  // è·å–æ‰€æœ‰ç‰©æ–™åˆ—è¡¨(ç”¨äºè®¾è®¡å™¨å±•ç¤º)
  getAllMaterials() {
    return Array.from(this.metadata.values());
  }

  // åŠ¨æ€åŠ è½½ç‰©æ–™åŒ…
  async loadMaterialPackage(packageName) {
    try {
      // æ–¹å¼1: ä»CDNåŠ è½½
      const module = await this.loadFromCDN(packageName);

      // æ–¹å¼2: é€šè¿‡importåŠ¨æ€å¯¼å…¥
      // const module = await import(packageName);

      this.register(packageName, module.default);
      return true;
    } catch (error) {
      console.error(`Failed to load material: ${packageName}`, error);
      return false;
    }
  }

  // ä»CDNåŠ è½½ç‰©æ–™
  async loadFromCDN(packageName, version = 'latest') {
    const url = `https://cdn.example.com/materials/${packageName}@${version}/index.js`;

    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      script.src = url;
      script.onload = () => {
        // å‡è®¾ç‰©æ–™åŒ…æŒ‚è½½åˆ° window.LowCodeMaterials
        const module = window.LowCodeMaterials[packageName];
        resolve(module);
      };
      script.onerror = reject;
      document.head.appendChild(script);
    });
  }
}

export default new MaterialRegistry();
```

### 3.4 æ¸²æŸ“å¼•æ“å‡çº§(æ”¯æŒåŠ¨æ€ç‰©æ–™)

```javascript
// renderer/Renderer.jsx (å‡çº§ç‰ˆ)
import React from 'react';
import MaterialRegistry from '../material-registry/MaterialRegistry';

class Renderer extends React.Component {
  constructor(props) {
    super(props);
    this.schema = props.schema;
    this.state = {
      loading: true,
      error: null
    };
  }

  async componentDidMount() {
    // é¢„åŠ è½½Schemaä¸­ç”¨åˆ°çš„æ‰€æœ‰ç‰©æ–™
    await this.preloadMaterials();
  }

  // é¢„åŠ è½½ç‰©æ–™
  async preloadMaterials() {
    const materialsNeeded = this.collectMaterials(this.schema.componentTree);

    for (const componentName of materialsNeeded) {
      // æ£€æŸ¥æ˜¯å¦å·²åŠ è½½
      if (!MaterialRegistry.getComponent(componentName)) {
        const meta = MaterialRegistry.getMeta(componentName);
        if (meta?.packageName) {
          await MaterialRegistry.loadMaterialPackage(meta.packageName);
        }
      }
    }

    this.setState({ loading: false });
  }

  // æ”¶é›†Schemaä¸­ä½¿ç”¨çš„æ‰€æœ‰ç»„ä»¶å
  collectMaterials(node, set = new Set()) {
    if (node.componentName) {
      set.add(node.componentName);
    }
    node.children?.forEach(child => this.collectMaterials(child, set));
    return set;
  }

  // æ¸²æŸ“èŠ‚ç‚¹
  renderNode(nodeSchema) {
    const { componentName, props, children, id } = nodeSchema;

    // ä»æ³¨å†Œè¡¨è·å–ç»„ä»¶
    const Component = MaterialRegistry.getComponent(componentName);

    if (!Component) {
      return <div>Component {componentName} not found</div>;
    }

    const childNodes = children?.map(child => this.renderNode(child));

    return React.createElement(
      Component,
      { key: id, ...props },
      childNodes
    );
  }

  render() {
    if (this.state.loading) {
      return <div>Loading materials...</div>;
    }

    return this.renderNode(this.schema.componentTree);
  }
}
```

### 3.5 ç‰©æ–™å¼€å‘å·¥å…·

ä¸ºäº†è®©å¼€å‘è€…æ–¹ä¾¿åœ°å¼€å‘ç‰©æ–™,æä¾›è„šæ‰‹æ¶å·¥å…·:

```bash
# åˆ›å»ºç‰©æ–™é¡¹ç›®
npx @lowcode/create-material my-button

# é¡¹ç›®ç»“æ„
my-button/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.jsx
â”œâ”€â”€ demo/                    # æœ¬åœ°é¢„è§ˆ
â”‚   â””â”€â”€ demo.jsx
â”œâ”€â”€ lowcode-meta.json        # ç‰©æ–™å…ƒä¿¡æ¯
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

```javascript
// ç‰©æ–™å¼€å‘æ¨¡æ¿
// src/index.jsx
import React from 'react';

function MyButton({ type, children, onClick }) {
  return (
    <button
      className={`my-btn my-btn-${type}`}
      onClick={onClick}
    >
      {children}
    </button>
  );
}

// å¯¼å‡ºé…ç½®
export default {
  component: MyButton,
  meta: {
    name: 'MyButton',
    title: 'è‡ªå®šä¹‰æŒ‰é’®',
    category: 'custom',
    props: [
      {
        name: 'type',
        title: 'ç±»å‹',
        setter: 'SelectSetter',
        options: ['primary', 'secondary']
      }
    ],
    snippets: {
      componentName: 'MyButton',
      props: { type: 'primary', children: 'ç‚¹å‡»' }
    }
  }
};
```

### 3.6 ç‰©æ–™å‘å¸ƒæµç¨‹

```bash
# 1. å¼€å‘ç‰©æ–™
cd my-button
npm run dev        # æœ¬åœ°é¢„è§ˆ

# 2. æ„å»º
npm run build      # è¾“å‡ºåˆ° dist/

# 3. å‘å¸ƒåˆ°NPM
npm publish

# 4. åœ¨ä½ä»£ç å¹³å°ä¸­å®‰è£…
npm install @lowcode-materials/my-button

# 5. æ³¨å†Œåˆ°å¹³å°
import MyButton from '@lowcode-materials/my-button';
MaterialRegistry.register('@lowcode-materials/my-button', MyButton);
```

### 3.7 ç‰©æ–™å¸‚åœº

æä¾›ä¸€ä¸ªç‰©æ–™å¸‚åœº,è®©å¼€å‘è€…å¯ä»¥æµè§ˆã€å®‰è£…ç‰©æ–™:

```javascript
// ç‰©æ–™å¸‚åœºAPI
class MaterialMarket {
  // æœç´¢ç‰©æ–™
  async search(keyword) {
    const response = await fetch(`/api/materials/search?q=${keyword}`);
    return response.json();
  }

  // å®‰è£…ç‰©æ–™
  async install(packageName) {
    // æ–¹å¼1: åç«¯NPMå®‰è£…
    await fetch('/api/materials/install', {
      method: 'POST',
      body: JSON.stringify({ packageName })
    });

    // æ–¹å¼2: å‰ç«¯åŠ¨æ€åŠ è½½
    await MaterialRegistry.loadMaterialPackage(packageName);
  }

  // è·å–ç‰©æ–™è¯¦æƒ…
  async getDetail(packageName) {
    const response = await fetch(`/api/materials/${packageName}`);
    return response.json();
  }
}
```

### 3.8 é˜¶æ®µäºŒæ€»ç»“

**ä¼˜ç‚¹:**
- âœ… ç‰©æ–™ç‹¬ç«‹,å¯å¤ç”¨å’Œå‘å¸ƒ
- âœ… æ”¯æŒæŒ‰éœ€åŠ è½½,å‡å°æ‰“åŒ…ä½“ç§¯
- âœ… ç¬¬ä¸‰æ–¹å¯ä»¥å¼€å‘å’Œå‘å¸ƒç‰©æ–™
- âœ… ç‰©æ–™å¯ä»¥å•ç‹¬ç‰ˆæœ¬ç®¡ç†

**ç¼ºç‚¹:**
- âŒ ç‰©æ–™ç‰ˆæœ¬ç®¡ç†å¤æ‚
- âŒ ç¼ºå°‘ç»Ÿä¸€çš„æ„å»ºè§„èŒƒ
- âŒ ç‰©æ–™è´¨é‡å‚å·®ä¸é½
- âŒ ä¾èµ–ç®¡ç†å›°éš¾

**é€‚ç”¨åœºæ™¯:**
- ä¸­å‹å›¢é˜Ÿ(5-20äºº)
- éœ€è¦ç‰©æ–™å¤ç”¨
- æœ‰ç¬¬ä¸‰æ–¹ç‰©æ–™æ¥å…¥éœ€æ±‚

---

## å››ã€é˜¶æ®µä¸‰:ä¼ä¸šçº§æ–¹æ¡ˆ - å¾®å†…æ ¸æ¶æ„

> **æ ¸å¿ƒå‡çº§**: Monorepoç®¡ç†ã€ç»Ÿä¸€æ„å»ºå·¥å…·ã€å®Œæ•´çš„ç‰©æ–™ç”Ÿæ€
> **è§£å†³é—®é¢˜**: å¤§è§„æ¨¡å›¢é˜Ÿåä½œã€ç‰©æ–™æ ‡å‡†åŒ–ã€æ€§èƒ½ä¼˜åŒ–

### 4.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Low-Code Platform                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Designer    â”‚  â”‚   Renderer   â”‚  â”‚  Publisher   â”‚          â”‚
â”‚  â”‚  (è®¾è®¡å™¨)     â”‚  â”‚  (æ¸²æŸ“å¼•æ“)   â”‚  â”‚  (å‘å¸ƒç³»ç»Ÿ)   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â†“                                     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                   â”‚  Core Engine    â”‚                            â”‚
â”‚                   â”‚  (æ ¸å¿ƒå¼•æ“)      â”‚                            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                            â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â†“                  â†“                  â†“                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Plugin      â”‚  â”‚  Material   â”‚  â”‚  Extension  â”‚             â”‚
â”‚  â”‚ System      â”‚  â”‚  System     â”‚  â”‚  API        â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Monorepoé¡¹ç›®ç»“æ„

```
lowcode-platform/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒå¼•æ“
â”‚   â”‚   â”œâ”€â”€ schema/              # Schemaåè®®
â”‚   â”‚   â”œâ”€â”€ renderer/            # æ¸²æŸ“å¼•æ“
â”‚   â”‚   â”œâ”€â”€ expression/          # è¡¨è¾¾å¼è§£æ
â”‚   â”‚   â””â”€â”€ events/              # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”‚
â”‚   â”œâ”€â”€ designer/                # è®¾è®¡å™¨
â”‚   â”‚   â”œâ”€â”€ canvas/              # ç”»å¸ƒ
â”‚   â”‚   â”œâ”€â”€ panels/              # å„ç§é¢æ¿
â”‚   â”‚   â”œâ”€â”€ setters/             # å±æ€§é…ç½®å™¨
â”‚   â”‚   â””â”€â”€ plugins/             # è®¾è®¡å™¨æ’ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ material-registry/       # ç‰©æ–™æ³¨å†Œè¡¨
â”‚   â”‚
â”‚   â”œâ”€â”€ cli/                     # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”‚   â”œâ”€â”€ create-material/    # åˆ›å»ºç‰©æ–™
â”‚   â”‚   â”œâ”€â”€ build/               # æ„å»ºå·¥å…·
â”‚   â”‚   â””â”€â”€ dev/                 # å¼€å‘æœåŠ¡å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ materials/               # å®˜æ–¹ç‰©æ–™åº“
â”‚   â”‚   â”œâ”€â”€ button/
â”‚   â”‚   â”œâ”€â”€ input/
â”‚   â”‚   â”œâ”€â”€ table/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ plugins/                 # å®˜æ–¹æ’ä»¶
â”‚       â”œâ”€â”€ plugin-datasource/   # æ•°æ®æºæ’ä»¶
â”‚       â”œâ”€â”€ plugin-i18n/         # å›½é™…åŒ–æ’ä»¶
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ designer-app/            # è®¾è®¡å™¨åº”ç”¨
â”‚   â”œâ”€â”€ preview-app/             # é¢„è§ˆåº”ç”¨
â”‚   â””â”€â”€ material-market/         # ç‰©æ–™å¸‚åœº
â”‚
â”œâ”€â”€ scripts/                     # æ„å»ºè„šæœ¬
â”œâ”€â”€ lerna.json                   # Lernaé…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ pnpm-workspace.yaml          # pnpm workspaceé…ç½®
```

### 4.3 ç»Ÿä¸€æ„å»ºå·¥å…·

```javascript
// packages/cli/build/index.js
const { build } = require('vite');
const react = require('@vitejs/plugin-react');

class MaterialBuilder {
  constructor(options) {
    this.options = options;
  }

  // æ„å»ºç‰©æ–™åŒ…
  async buildMaterial(materialPath) {
    // è¯»å–ç‰©æ–™å…ƒä¿¡æ¯
    const meta = require(`${materialPath}/lowcode-meta.json`);

    // Viteé…ç½®
    const config = {
      plugins: [react()],
      build: {
        lib: {
          entry: `${materialPath}/src/index.jsx`,
          name: meta.name,
          formats: ['es', 'umd'],
          fileName: (format) => `index.${format}.js`
        },
        rollupOptions: {
          external: ['react', 'react-dom'],
          output: {
            globals: {
              react: 'React',
              'react-dom': 'ReactDOM'
            }
          }
        },
        outDir: `${materialPath}/dist`
      }
    };

    // æ‰§è¡Œæ„å»º
    await build(config);

    // ç”Ÿæˆç‰©æ–™æè¿°æ–‡ä»¶
    await this.generateMetadata(materialPath, meta);

    console.log(`âœ… Material built: ${meta.name}`);
  }

  // ç”Ÿæˆå…ƒæ•°æ®
  async generateMetadata(materialPath, meta) {
    const metadata = {
      ...meta,
      dist: {
        es: 'dist/index.es.js',
        umd: 'dist/index.umd.js'
      },
      buildTime: new Date().toISOString()
    };

    const fs = require('fs');
    fs.writeFileSync(
      `${materialPath}/dist/metadata.json`,
      JSON.stringify(metadata, null, 2)
    );
  }

  // æ‰¹é‡æ„å»º
  async buildAll(materialsDir) {
    const fs = require('fs');
    const materials = fs.readdirSync(materialsDir);

    for (const material of materials) {
      const materialPath = `${materialsDir}/${material}`;
      await this.buildMaterial(materialPath);
    }
  }
}

// CLIä½¿ç”¨
// npx lowcode-build --material ./packages/materials/button
```

### 4.4 ç‰©æ–™èµ„æºå‘å¸ƒç³»ç»Ÿ

```javascript
// ç‰©æ–™å‘å¸ƒå¹³å°
class MaterialPublisher {
  constructor(registry) {
    this.registry = registry;  // NPMæˆ–ç§æœ‰registry
    this.cdn = 'https://cdn.example.com';
  }

  // å‘å¸ƒç‰©æ–™
  async publish(materialPath) {
    // 1. æ„å»º
    await new MaterialBuilder().buildMaterial(materialPath);

    // 2. å‘å¸ƒåˆ°NPM
    await this.publishToNPM(materialPath);

    // 3. ä¸Šä¼ åˆ°CDN
    await this.uploadToCDN(materialPath);

    // 4. æ›´æ–°ç‰©æ–™ç´¢å¼•
    await this.updateIndex(materialPath);
  }

  // å‘å¸ƒåˆ°NPM
  async publishToNPM(materialPath) {
    const { exec } = require('child_process');
    const meta = require(`${materialPath}/package.json`);

    return new Promise((resolve, reject) => {
      exec(`cd ${materialPath} && npm publish`, (error, stdout) => {
        if (error) reject(error);
        else resolve(stdout);
      });
    });
  }

  // ä¸Šä¼ åˆ°CDN
  async uploadToCDN(materialPath) {
    const meta = require(`${materialPath}/lowcode-meta.json`);
    const version = require(`${materialPath}/package.json`).version;

    // ä¸Šä¼ æ„å»ºäº§ç‰©
    const distFiles = ['index.es.js', 'index.umd.js', 'metadata.json'];

    for (const file of distFiles) {
      const localPath = `${materialPath}/dist/${file}`;
      const remotePath = `${this.cdn}/materials/${meta.name}@${version}/${file}`;

      await this.uploadFile(localPath, remotePath);
    }
  }

  // æ›´æ–°ç‰©æ–™ç´¢å¼•
  async updateIndex(materialPath) {
    const meta = require(`${materialPath}/dist/metadata.json`);

    // å‘é€åˆ°ç‰©æ–™å¸‚åœºåç«¯
    await fetch('/api/materials/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(meta)
    });
  }
}
```

### 4.5 ç‰©æ–™ç‰ˆæœ¬ç®¡ç†

```javascript
// ç‰©æ–™ç‰ˆæœ¬ç®¡ç†å™¨
class MaterialVersionManager {
  constructor() {
    this.registry = new Map(); // ç‰©æ–™å -> ç‰ˆæœ¬åˆ—è¡¨
  }

  // æ³¨å†Œç‰©æ–™ç‰ˆæœ¬
  register(name, version, url) {
    if (!this.registry.has(name)) {
      this.registry.set(name, []);
    }

    this.registry.get(name).push({
      version,
      url,
      loadedAt: null,
      instance: null
    });
  }

  // è·å–ç‰¹å®šç‰ˆæœ¬
  async load(name, version = 'latest') {
    const versions = this.registry.get(name);
    if (!versions) {
      throw new Error(`Material ${name} not found`);
    }

    // è§£æç‰ˆæœ¬
    const targetVersion = version === 'latest'
      ? this.getLatestVersion(versions)
      : versions.find(v => v.version === version);

    if (!targetVersion) {
      throw new Error(`Version ${version} of ${name} not found`);
    }

    // å·²åŠ è½½åˆ™ç›´æ¥è¿”å›
    if (targetVersion.instance) {
      return targetVersion.instance;
    }

    // åŠ¨æ€åŠ è½½
    const module = await this.loadModule(targetVersion.url);
    targetVersion.instance = module;
    targetVersion.loadedAt = Date.now();

    return module;
  }

  // è·å–æœ€æ–°ç‰ˆæœ¬
  getLatestVersion(versions) {
    return versions.sort((a, b) =>
      this.compareVersion(b.version, a.version)
    )[0];
  }

  // ç‰ˆæœ¬æ¯”è¾ƒ
  compareVersion(v1, v2) {
    const parts1 = v1.split('.').map(Number);
    const parts2 = v2.split('.').map(Number);

    for (let i = 0; i < 3; i++) {
      if (parts1[i] > parts2[i]) return 1;
      if (parts1[i] < parts2[i]) return -1;
    }
    return 0;
  }
}
```

### 4.6 Schemaç‰ˆæœ¬å‡çº§

```javascript
// Schemaè¿ç§»å·¥å…·
class SchemaMigration {
  constructor() {
    this.migrations = new Map();
  }

  // æ³¨å†Œè¿ç§»è§„åˆ™
  register(fromVersion, toVersion, migrateFn) {
    const key = `${fromVersion}->${toVersion}`;
    this.migrations.set(key, migrateFn);
  }

  // æ‰§è¡Œè¿ç§»
  migrate(schema, targetVersion) {
    const currentVersion = schema.version;

    if (currentVersion === targetVersion) {
      return schema;
    }

    // æ‰¾åˆ°è¿ç§»è·¯å¾„
    const path = this.findMigrationPath(currentVersion, targetVersion);

    // ä¾æ¬¡æ‰§è¡Œè¿ç§»
    let migratedSchema = { ...schema };
    for (let i = 0; i < path.length - 1; i++) {
      const from = path[i];
      const to = path[i + 1];
      const key = `${from}->${to}`;
      const migrateFn = this.migrations.get(key);

      if (migrateFn) {
        migratedSchema = migrateFn(migratedSchema);
        migratedSchema.version = to;
      }
    }

    return migratedSchema;
  }

  // æŸ¥æ‰¾è¿ç§»è·¯å¾„
  findMigrationPath(from, to) {
    // ç®€åŒ–å®ç°:å‡è®¾ç‰ˆæœ¬æ˜¯é€’å¢çš„
    const versions = ['1.0.0', '1.1.0', '2.0.0', '2.1.0'];
    const fromIndex = versions.indexOf(from);
    const toIndex = versions.indexOf(to);

    return versions.slice(fromIndex, toIndex + 1);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const migration = new SchemaMigration();

// æ³¨å†Œv1.0 -> v1.1è¿ç§»
migration.register('1.0.0', '1.1.0', (schema) => {
  // ç¤ºä¾‹:å°†æ—§çš„eventsæ ¼å¼è½¬æ¢ä¸ºæ–°æ ¼å¼
  const transform = (node) => {
    if (node.events) {
      node.handlers = node.events; // é‡å‘½å
      delete node.events;
    }
    node.children?.forEach(transform);
  };

  transform(schema.componentTree);
  return schema;
});

// æ‰§è¡Œè¿ç§»
const oldSchema = { version: '1.0.0', /* ... */ };
const newSchema = migration.migrate(oldSchema, '1.1.0');
```

### 4.7 æ’ä»¶ç³»ç»Ÿ

```javascript
// æ ¸å¿ƒæ’ä»¶ç³»ç»Ÿ
class PluginSystem {
  constructor() {
    this.plugins = [];
    this.hooks = {
      beforeRender: [],
      afterRender: [],
      onSchemaChange: [],
      onComponentAdd: []
    };
  }

  // æ³¨å†Œæ’ä»¶
  use(plugin) {
    if (typeof plugin.install === 'function') {
      plugin.install(this);
      this.plugins.push(plugin);
    }
  }

  // æ³¨å†Œé’©å­
  registerHook(hookName, callback) {
    if (this.hooks[hookName]) {
      this.hooks[hookName].push(callback);
    }
  }

  // è§¦å‘é’©å­
  async triggerHook(hookName, ...args) {
    const hooks = this.hooks[hookName] || [];

    for (const hook of hooks) {
      await hook(...args);
    }
  }
}

// æ’ä»¶ç¤ºä¾‹:æ•°æ®æºæ’ä»¶
class DataSourcePlugin {
  install(platform) {
    // æ‰©å±•Schemaåè®®
    platform.registerHook('beforeRender', (schema) => {
      // åˆå§‹åŒ–æ•°æ®æº
      this.initDataSources(schema.dataSources);
    });

    // æ³¨å†ŒåŠ¨ä½œ
    platform.actionRegistry.register('fetchDataSource', (payload) => {
      this.fetchDataSource(payload.id);
    });
  }

  initDataSources(dataSources) {
    // æ•°æ®æºåˆå§‹åŒ–é€»è¾‘
  }

  fetchDataSource(id) {
    // æ•°æ®æºè¯·æ±‚é€»è¾‘
  }
}

// ä½¿ç”¨æ’ä»¶
const platform = new LowCodePlatform();
platform.use(new DataSourcePlugin());
```

### 4.8 æ€§èƒ½ä¼˜åŒ–

```javascript
// æŒ‰éœ€åŠ è½½ç‰©æ–™
class LazyMaterialLoader {
  constructor() {
    this.cache = new Map();
    this.loading = new Map();
  }

  // æ‡’åŠ è½½ç‰©æ–™
  async load(componentName) {
    // 1. æ£€æŸ¥ç¼“å­˜
    if (this.cache.has(componentName)) {
      return this.cache.get(componentName);
    }

    // 2. é˜²æ­¢é‡å¤åŠ è½½
    if (this.loading.has(componentName)) {
      return this.loading.get(componentName);
    }

    // 3. å¼€å§‹åŠ è½½
    const promise = this.doLoad(componentName);
    this.loading.set(componentName, promise);

    try {
      const component = await promise;
      this.cache.set(componentName, component);
      return component;
    } finally {
      this.loading.delete(componentName);
    }
  }

  async doLoad(componentName) {
    // ä»CDNåŠ è½½
    const url = `/materials/${componentName}/index.js`;
    const module = await import(url);
    return module.default;
  }
}

// è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
class VirtualScroll extends React.Component {
  render() {
    const { items, itemHeight, containerHeight } = this.props;
    const [scrollTop, setScrollTop] = useState(0);

    // è®¡ç®—å¯è§†åŒºåŸŸ
    const startIndex = Math.floor(scrollTop / itemHeight);
    const endIndex = Math.ceil((scrollTop + containerHeight) / itemHeight);
    const visibleItems = items.slice(startIndex, endIndex);

    return (
      <div
        style={{ height: containerHeight, overflow: 'auto' }}
        onScroll={(e) => setScrollTop(e.target.scrollTop)}
      >
        <div style={{ height: items.length * itemHeight, position: 'relative' }}>
          {visibleItems.map((item, index) => (
            <div
              key={startIndex + index}
              style={{
                position: 'absolute',
                top: (startIndex + index) * itemHeight,
                height: itemHeight
              }}
            >
              {this.props.renderItem(item)}
            </div>
          ))}
        </div>
      </div>
    );
  }
}
```

### 4.9 é˜¶æ®µä¸‰æ€»ç»“

**ä¼˜ç‚¹:**
- âœ… å®Œå–„çš„å·¥ç¨‹åŒ–ä½“ç³»
- âœ… ç»Ÿä¸€çš„æ„å»ºå’Œå‘å¸ƒæµç¨‹
- âœ… æ”¯æŒå¤§è§„æ¨¡å›¢é˜Ÿåä½œ
- âœ… å®Œå–„çš„ç‰©æ–™ç”Ÿæ€
- âœ… é«˜æ€§èƒ½ã€å¯æ‰©å±•

**ç¼ºç‚¹:**
- âŒ æ¶æ„å¤æ‚,å­¦ä¹ æˆæœ¬é«˜
- âŒ éœ€è¦ä¸“ä¸šçš„è¿ç»´å›¢é˜Ÿ
- âŒ åˆæœŸæŠ•å…¥å¤§

**é€‚ç”¨åœºæ™¯:**
- å¤§å‹ä¼ä¸š(>50äºº)
- å¤šå›¢é˜Ÿåä½œ
- éœ€è¦å®Œæ•´çš„ç‰©æ–™ç”Ÿæ€

---

## äº”ã€æ„å»ºå·¥å…·é“¾è®¾è®¡

### 5.1 CLIå·¥å…·

```javascript
// packages/cli/index.js
const { Command } = require('commander');
const program = new Command();

program
  .name('lowcode-cli')
  .description('Low-Code Platform CLI')
  .version('1.0.0');

// åˆ›å»ºç‰©æ–™
program
  .command('create <name>')
  .description('Create a new material')
  .option('-t, --template <type>', 'Material template', 'basic')
  .action(async (name, options) => {
    const creator = require('./commands/create');
    await creator.create(name, options);
  });

// å¼€å‘æ¨¡å¼
program
  .command('dev')
  .description('Start development server')
  .option('-p, --port <port>', 'Port number', '3000')
  .action(async (options) => {
    const devServer = require('./commands/dev');
    await devServer.start(options);
  });

// æ„å»º
program
  .command('build')
  .description('Build material')
  .option('-o, --outDir <dir>', 'Output directory', 'dist')
  .action(async (options) => {
    const builder = require('./commands/build');
    await builder.build(options);
  });

// å‘å¸ƒ
program
  .command('publish')
  .description('Publish material to registry')
  .option('--registry <url>', 'NPM registry URL')
  .option('--cdn', 'Upload to CDN')
  .action(async (options) => {
    const publisher = require('./commands/publish');
    await publisher.publish(options);
  });

program.parse();
```

### 5.2 å¼€å‘æœåŠ¡å™¨

```javascript
// packages/cli/commands/dev.js
const express = require('express');
const { createServer } = require('vite');

async function startDevServer(options) {
  const app = express();

  // Viteå¼€å‘æœåŠ¡å™¨
  const vite = await createServer({
    server: { middlewareMode: true },
    appType: 'custom'
  });

  app.use(vite.middlewares);

  // ç‰©æ–™é¢„è§ˆé¡µé¢
  app.get('/preview', async (req, res) => {
    const template = `
      <!DOCTYPE html>
      <html>
        <head>
          <title>Material Preview</title>
        </head>
        <body>
          <div id="root"></div>
          <script type="module" src="/src/demo/index.jsx"></script>
        </body>
      </html>
    `;
    res.send(await vite.transformIndexHtml('/preview', template));
  });

  const port = options.port || 3000;
  app.listen(port, () => {
    console.log(`ğŸš€ Dev server running at http://localhost:${port}`);
  });
}

module.exports = { start: startDevServer };
```

### 5.3 ç‰©æ–™æ¨¡æ¿

```javascript
// packages/cli/templates/basic/template.js
module.exports = {
  name: '{{name}}',
  files: {
    'src/index.jsx': `
import React from 'react';
import './style.css';

function {{Name}}(props) {
  return (
    <div className="{{name}}">
      {{Name}} Component
    </div>
  );
}

export default {{Name}};
    `,

    'src/style.css': `
.{{name}} {
  padding: 10px;
  border: 1px solid #ccc;
}
    `,

    'lowcode-meta.json': `
{
  "name": "{{Name}}",
  "title": "{{title}}",
  "category": "custom",
  "props": [
    {
      "name": "className",
      "title": "æ ·å¼ç±»å",
      "type": "string"
    }
  ],
  "snippets": {
    "componentName": "{{Name}}",
    "props": {}
  }
}
    `,

    'package.json': `
{
  "name": "@lowcode-materials/{{name}}",
  "version": "1.0.0",
  "main": "dist/index.js",
  "scripts": {
    "dev": "lowcode-cli dev",
    "build": "lowcode-cli build"
  }
}
    `
  }
};
```

---

## å…­ã€ç‰©æ–™ç”Ÿæ€ä½“ç³»

### 6.1 ç‰©æ–™åˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é¡µé¢æ¨¡æ¿ (Page Templates)        â”‚  å®Œæ•´é¡µé¢
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          åŒºå— (Blocks)                  â”‚  ç»„åˆå‹ç»„ä»¶
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       ä¸šåŠ¡ç»„ä»¶ (Business Components)    â”‚  ä¸šåŠ¡å°è£…
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       åŸºç¡€ç»„ä»¶ (Base Components)        â”‚  åŸå­ç»„ä»¶
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç¤ºä¾‹:**

```javascript
// 1. åŸºç¡€ç»„ä»¶
@lowcode-materials/button
@lowcode-materials/input
@lowcode-materials/table

// 2. ä¸šåŠ¡ç»„ä»¶
@mycompany/user-selector     // ç”¨æˆ·é€‰æ‹©å™¨
@mycompany/dept-tree         // éƒ¨é—¨æ ‘

// 3. åŒºå—
@mycompany/login-form-block  // ç™»å½•è¡¨å•åŒºå—
@mycompany/user-list-block   // ç”¨æˆ·åˆ—è¡¨åŒºå—

// 4. é¡µé¢æ¨¡æ¿
@mycompany/dashboard-template // ä»ªè¡¨ç›˜æ¨¡æ¿
@mycompany/form-page-template // è¡¨å•é¡µæ¨¡æ¿
```

### 6.2 ç‰©æ–™æ ‡å‡†è§„èŒƒ

```javascript
// ç‰©æ–™åŒ…ç»“æ„è§„èŒƒ
{
  "name": "@scope/material-name",
  "version": "1.0.0",
  "description": "ç‰©æ–™æè¿°",

  // å…¥å£æ–‡ä»¶
  "main": "dist/index.js",
  "module": "dist/index.es.js",

  // ä¾èµ–
  "peerDependencies": {
    "react": ">=16.8.0",
    "react-dom": ">=16.8.0"
  },

  // ä½ä»£ç å…ƒä¿¡æ¯
  "lowcode": {
    "meta": "dist/metadata.json",
    "preview": "dist/preview.png"
  },

  // å…¶ä»–æ ‡å‡†å­—æ®µ
  "keywords": ["lowcode", "material", "component"],
  "license": "MIT"
}
```

### 6.3 ç‰©æ–™å¸‚åœº

```javascript
// ç‰©æ–™å¸‚åœºåç«¯API
class MaterialMarketAPI {
  // è·å–ç‰©æ–™åˆ—è¡¨
  async list(params) {
    // GET /api/materials?category=basic&keyword=button
    return {
      total: 100,
      items: [
        {
          id: 'mat_001',
          name: '@lc/button',
          title: 'æŒ‰é’®',
          description: 'åŸºç¡€æŒ‰é’®ç»„ä»¶',
          category: 'basic',
          version: '1.0.0',
          downloads: 1000,
          rating: 4.5,
          author: 'lowcode-team',
          preview: 'https://cdn.../preview.png'
        }
      ]
    };
  }

  // è·å–ç‰©æ–™è¯¦æƒ…
  async detail(materialId) {
    // GET /api/materials/:id
    return {
      id: 'mat_001',
      name: '@lc/button',
      versions: ['1.0.0', '1.1.0', '2.0.0'],
      readme: '# Button Component\n...',
      metadata: { /* lowcode-meta.json */ },
      dependencies: ['react'],
      demos: [
        { title: 'åŸºç¡€ç”¨æ³•', code: '...' }
      ]
    };
  }

  // å®‰è£…ç‰©æ–™
  async install(materialName, version) {
    // POST /api/materials/install
    // åç«¯æ‰§è¡Œ: npm install @lc/button@1.0.0
    return { success: true };
  }
}
```

---

## ä¸ƒã€æ€§èƒ½ä¸å®‰å…¨

### 7.1 æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–

```javascript
// 1. ç»„ä»¶ç¼“å­˜
const MaterialCache = new Map();

function getCachedComponent(componentName) {
  if (!MaterialCache.has(componentName)) {
    const Component = loadComponent(componentName);
    MaterialCache.set(componentName, React.memo(Component));
  }
  return MaterialCache.get(componentName);
}

// 2. è¡¨è¾¾å¼ç¼“å­˜
class ExpressionCache {
  constructor(maxSize = 1000) {
    this.cache = new Map();
    this.maxSize = maxSize;
  }

  get(key) {
    return this.cache.get(key);
  }

  set(key, value) {
    if (this.cache.size >= this.maxSize) {
      const firstKey = this.cache.keys().next().value;
      this.cache.delete(firstKey);
    }
    this.cache.set(key, value);
  }
}

// 3. è™šæ‹Ÿåˆ—è¡¨
import { FixedSizeList } from 'react-window';

function LargeList({ items }) {
  return (
    <FixedSizeList
      height={600}
      itemCount={items.length}
      itemSize={50}
      width="100%"
    >
      {({ index, style }) => (
        <div style={style}>{items[index]}</div>
      )}
    </FixedSizeList>
  );
}
```

### 7.2 å®‰å…¨é˜²æŠ¤

```javascript
// 1. è¡¨è¾¾å¼æ²™ç®±
class SafeExpressionEvaluator {
  constructor() {
    this.allowedGlobals = ['Math', 'Date', 'JSON', 'Object', 'Array'];
    this.blockedGlobals = ['window', 'document', 'eval', 'Function'];
  }

  evaluate(expression, context) {
    // æ£€æŸ¥æ˜¯å¦åŒ…å«å±é™©ä»£ç 
    if (this.containsDangerousCode(expression)) {
      throw new Error('Expression contains dangerous code');
    }

    // åˆ›å»ºå®‰å…¨ä¸Šä¸‹æ–‡
    const safeContext = this.createSafeContext(context);

    // ä½¿ç”¨Functionæ„é€ å™¨(é™åˆ¶ä½œç”¨åŸŸ)
    try {
      const fn = new Function(
        ...Object.keys(safeContext),
        `return (${expression});`
      );
      return fn(...Object.values(safeContext));
    } catch (error) {
      console.error('Expression evaluation error:', error);
      return null;
    }
  }

  containsDangerousCode(expression) {
    const dangerousPatterns = [
      /eval\s*\(/,
      /Function\s*\(/,
      /\bwindow\b/,
      /\bdocument\b/,
      /__proto__/,
      /constructor/
    ];

    return dangerousPatterns.some(pattern => pattern.test(expression));
  }

  createSafeContext(context) {
    // åªæš´éœ²å®‰å…¨çš„API
    return {
      ...context,
      Math,
      Date,
      JSON: JSON,
      console: {
        log: console.log.bind(console),
        warn: console.warn.bind(console)
      }
    };
  }
}

// 2. XSSé˜²æŠ¤
import DOMPurify from 'dompurify';

function sanitizeProps(props) {
  const sanitized = {};

  for (const [key, value] of Object.entries(props)) {
    if (typeof value === 'string') {
      // å¯¹å­—ç¬¦ä¸²å†…å®¹è¿›è¡Œæ¸…æ´—
      sanitized[key] = DOMPurify.sanitize(value);
    } else if (key === 'dangerouslySetInnerHTML') {
      // ç¦æ­¢ä½¿ç”¨dangerouslySetInnerHTML
      console.warn('dangerouslySetInnerHTML is not allowed');
      continue;
    } else {
      sanitized[key] = value;
    }
  }

  return sanitized;
}

// 3. æƒé™æ§åˆ¶
class PermissionManager {
  checkPermission(user, action, resource) {
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒæŸä¸ªæ“ä½œ
    const userRoles = user.roles || [];
    const requiredRoles = this.getRequiredRoles(action, resource);

    return requiredRoles.some(role => userRoles.includes(role));
  }

  getRequiredRoles(action, resource) {
    const permissionMap = {
      'schema.edit': ['admin', 'editor'],
      'schema.publish': ['admin'],
      'material.install': ['admin', 'developer']
    };

    const key = `${resource}.${action}`;
    return permissionMap[key] || [];
  }
}
```

---

## å…«ã€å®æˆ˜æ¡ˆä¾‹

### 8.1 æ¡ˆä¾‹ä¸€:è¡¨å•ç”Ÿæˆå™¨

```javascript
// 1. å®šä¹‰è¡¨å•Schema
const formSchema = {
  componentTree: {
    componentName: 'Form',
    props: {
      layout: 'horizontal',
      onSubmit: { type: 'submitForm', payload: { api: '/api/users' } }
    },
    children: [
      {
        componentName: 'FormItem',
        props: { label: 'ç”¨æˆ·å', name: 'username', rules: [{ required: true }] },
        children: [
          { componentName: 'Input', props: { placeholder: 'è¯·è¾“å…¥ç”¨æˆ·å' } }
        ]
      },
      {
        componentName: 'FormItem',
        props: { label: 'é‚®ç®±', name: 'email' },
        children: [
          { componentName: 'Input', props: { type: 'email' } }
        ]
      },
      {
        componentName: 'FormItem',
        children: [
          { componentName: 'Button', props: { type: 'primary', htmlType: 'submit', children: 'æäº¤' } }
        ]
      }
    ]
  }
};

// 2. æ¸²æŸ“
<Renderer schema={formSchema} />
```

### 8.2 æ¡ˆä¾‹äºŒ:æ•°æ®å¤§å±

```javascript
const dashboardSchema = {
  componentTree: {
    componentName: 'DashboardLayout',
    props: { columns: 24, rows: 12 },
    children: [
      {
        componentName: 'ChartCard',
        props: {
          gridArea: { x: 0, y: 0, w: 12, h: 6 },
          title: 'é”€å”®è¶‹åŠ¿'
        },
        children: [
          {
            componentName: 'LineChart',
            props: {
              dataSource: '${dataSources.sales.data}',
              xField: 'date',
              yField: 'amount'
            }
          }
        ]
      },
      {
        componentName: 'StatCard',
        props: {
          gridArea: { x: 12, y: 0, w: 6, h: 3 },
          title: 'ä»Šæ—¥è®¢å•',
          value: '${dataSources.stats.data.orders}'
        }
      }
    ]
  },
  dataSources: [
    {
      id: 'sales',
      type: 'http',
      config: { url: '/api/sales/trend', method: 'GET' }
    },
    {
      id: 'stats',
      type: 'http',
      config: { url: '/api/stats/today', method: 'GET' }
    }
  ]
};
```

### 8.3 æ¡ˆä¾‹ä¸‰:ç§»åŠ¨ç«¯é¡µé¢

```javascript
const mobileSchema = {
  platform: 'mobile',
  componentTree: {
    componentName: 'MobilePage',
    props: { title: 'å•†å“è¯¦æƒ…' },
    children: [
      {
        componentName: 'ImageSwiper',
        props: {
          images: '${state.product.images}',
          autoplay: true
        }
      },
      {
        componentName: 'ProductInfo',
        props: {
          title: '${state.product.title}',
          price: '${state.product.price}'
        }
      },
      {
        componentName: 'BottomBar',
        children: [
          {
            componentName: 'Button',
            props: {
              type: 'primary',
              children: 'ç«‹å³è´­ä¹°',
              onClick: { type: 'navigate', payload: { url: '/order' } }
            }
          }
        ]
      }
    ]
  },
  state: {
    product: null
  },
  lifeCycles: {
    onMount: [
      { type: 'fetchDataSource', payload: { id: 'product' } }
    ]
  }
};
```

---

## ä¹ã€æ€»ç»“ä¸å±•æœ›

### 9.1 ä¸‰é˜¶æ®µå¯¹æ¯”

| ç‰¹æ€§ | é˜¶æ®µä¸€:æœ€ç®€å®ç° | é˜¶æ®µäºŒ:ç‰©æ–™ç‹¬ç«‹ | é˜¶æ®µä¸‰:ä¼ä¸šçº§ |
|------|----------------|----------------|--------------|
| ç‰©æ–™ç®¡ç† | å†…ç½® | NPMåŒ… | Monorepo + ç‰©æ–™å¸‚åœº |
| æ„å»ºå·¥å…· | æ—  | ç®€å•è„šæœ¬ | ç»Ÿä¸€CLIå·¥å…· |
| ç‰ˆæœ¬ç®¡ç† | æ—  | åŸºç¡€ | å®Œå–„çš„ç‰ˆæœ¬ç³»ç»Ÿ |
| å›¢é˜Ÿè§„æ¨¡ | <5äºº | 5-20äºº | >50äºº |
| æ‰©å±•æ€§ | ä½ | ä¸­ | é«˜ |
| å­¦ä¹ æˆæœ¬ | ä½ | ä¸­ | é«˜ |

### 9.2 æ ¸å¿ƒè¦ç‚¹å›é¡¾

1. **Schemaåè®®æ˜¯æ ¸å¿ƒ** - å®ƒå†³å®šäº†å¹³å°çš„èƒ½åŠ›è¾¹ç•Œ
2. **ç‰©æ–™ä½“ç³»æ˜¯ç”Ÿæ€** - ä¸°å¯Œçš„ç‰©æ–™æ‰èƒ½æ”¯æ’‘å¤æ‚åº”ç”¨
3. **æ¸²æŸ“å¼•æ“æ˜¯æ€§èƒ½å…³é”®** - ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒ
4. **å·¥ç¨‹åŒ–æ˜¯è§„æ¨¡åŒ–åŸºç¡€** - æ²¡æœ‰å¥½çš„å·¥å…·é“¾,éš¾ä»¥æ”¯æ’‘å¤§å›¢é˜Ÿ

### 9.3 æœªæ¥å±•æœ›

- **AIè¾…åŠ©è®¾è®¡** - é€šè¿‡AIè‡ªåŠ¨ç”ŸæˆSchema
- **å¤šç«¯èåˆ** - ä¸€ä»½Schema,å¤šç«¯è¿è¡Œ
- **äº‘ç«¯ååŒ** - å®æ—¶å¤šäººåä½œç¼–è¾‘
- **æ™ºèƒ½ä¼˜åŒ–** - è‡ªåŠ¨æ€§èƒ½ä¼˜åŒ–å’Œä»£ç ç”Ÿæˆ

---

## é™„å½•

### A. å¸¸è§é—®é¢˜

**Q: ä½ä»£ç å¹³å°é€‚åˆå“ªäº›åœºæ™¯?**
A: ä¸­åå°ç®¡ç†ç³»ç»Ÿã€æ•°æ®å¤§å±ã€ç§»åŠ¨ç«¯H5é¡µé¢ã€ç®€å•å®˜ç½‘ç­‰é…ç½®ç±»é¡µé¢

**Q: ä½ä»£ç èƒ½å®Œå…¨æ›¿ä»£æ‰‹å†™ä»£ç å—?**
A: ä¸èƒ½ã€‚ä½ä»£ç é€‚åˆæ ‡å‡†åŒ–åœºæ™¯,å¤æ‚ä¸šåŠ¡é€»è¾‘ä»éœ€æ‰‹å†™ä»£ç 

**Q: å¦‚ä½•ä¿è¯ç‰©æ–™è´¨é‡?**
A: é€šè¿‡ç‰©æ–™å®¡æ ¸æœºåˆ¶ã€å•å…ƒæµ‹è¯•è¦æ±‚ã€æ–‡æ¡£è§„èŒƒç­‰æ–¹å¼

**Q: Schemaå¦‚ä½•åšç‰ˆæœ¬å…¼å®¹?**
A: é€šè¿‡Schemaè¿ç§»å·¥å…·,è‡ªåŠ¨å‡çº§æ—§ç‰ˆæœ¬Schema

### B. å‚è€ƒèµ„æº

- [é˜¿é‡Œä½ä»£ç å¼•æ“](https://lowcode-engine.com/)
- [ç™¾åº¦amis](https://aisuda.bce.baidu.com/amis/)
- [è…¾è®¯tmagic-editor](https://tmagic-editor.com/)
- [é£ä¹¦å¤šç»´è¡¨æ ¼](https://www.feishu.cn/product/base)

### C. æŠ€æœ¯æ ˆæ¨è

| ç±»åˆ« | æ¨èæ–¹æ¡ˆ |
|------|---------|
| UIæ¡†æ¶ | React 18+ |
| çŠ¶æ€ç®¡ç† | Zustand / Jotai |
| æ‹–æ‹½ | dnd-kit |
| æ„å»ºå·¥å…· | Vite |
| Monorepo | pnpm + Turborepo |
| è¡¨è¾¾å¼è§£æ | @babel/parser |
| æ ·å¼æ–¹æ¡ˆ | TailwindCSS |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**æ›´æ–°æ—¶é—´**: 2025-12-20
**ç»´æŠ¤è€…**: ä½ä»£ç å¹³å°å›¢é˜Ÿ
